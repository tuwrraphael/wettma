{"version":3,"sources":["webpack://wettma/./src/sw.ts"],"names":["cacheNames","code","asset","self","addEventListener","event","dividedAssets","__WB_MANIFEST","reduce","acc","next","url","indexOf","push","definedCaches","name","assets","waitUntil","tasks","map","async","cache","caches","open","c","addAll","Promise","all","storedCaches","keys","expectedCaches","Object","values","filter","delete","request","mode","respondWith","match","then","response","fetch","method","cacheName"],"mappings":"yBAOA,IAAI,EAAa,CACb,KAAM,gDACN,MAAO,YAGX,KAAK,iBAAiB,WAAW,SAAU,GACvC,IAAI,EAAgB,04HAAK,cAAc,QAAO,CAAC,EAAK,KAC5C,EAAK,IAAI,QAAQ,cAAgB,GAAK,EAAK,IAAI,QAAQ,SAAW,EAClE,EAAI,MAAM,KAAK,EAAK,KAGpB,EAAI,KAAK,KAAK,EAAK,KAEhB,IACR,CAAE,MAAO,GAAI,KAAM,KAClB,EAAgB,CAChB,CACI,KAAM,EAAW,KACjB,OAAQ,IACD,EAAc,OAGzB,CACI,KAAM,EAAW,MACjB,OAAQ,EAAc,QAG9B,EAAM,UAAU,WACZ,IAAI,EAAQ,EAAc,KAAI,UAC1B,IAAI,QAAc,OAAO,KAAK,EAAE,YAC1B,EAAM,OAAO,EAAE,OAAO,UAE1B,QAAQ,IAAI,EACrB,EANe,GAOpB,IAEA,KAAK,iBAAiB,YAAY,IAC9B,EAAM,UAAU,WACZ,IAAI,QAAqB,OAAO,OAC5B,EAAiB,OAAO,OAAO,GAC/B,EAAQ,EAAa,QAAO,GAAK,EAAe,QAAQ,GAAK,IAAG,KAAI,gBAC9D,OAAO,OAAO,EAAE,UAEpB,QAAQ,IAAI,EACrB,EAPe,GAOX,IAIT,KAAK,iBAAiB,SAAS,SAAU,GACrC,GAA2B,aAAvB,EAAM,QAAQ,KASlB,EAAM,YACF,OAAO,MAAM,EAAM,SAAS,MAAK,SAAU,GACvC,OAAI,GAGG,MAAM,EAAM,QACvB,SAfJ,CACI,GAA6B,QAAzB,EAAM,QAAQ,OACd,OAEJ,EAAM,YAAY,OAAO,MAAM,aAAc,CAAE,UAAW,EAAW,OAAQ,MAAK,GACvE,GAAY,MAAM,EAAM,YAY3C","file":"sw.js","sourceRoot":"","sourcesContent":["export default null;\ndeclare var self: ServiceWorkerGlobalScope;\ndeclare global {\n    interface WorkerGlobalScope {\n        __WB_MANIFEST: Array<{ revision: null, url: string }>;\n    }\n}\nlet cacheNames = {\n    code: `code-${__CACHENAME}`,\n    asset: \"asset-v1\"\n};\n\nself.addEventListener(\"install\", function (event) {\n    let dividedAssets = self.__WB_MANIFEST.reduce((acc, next) => {\n        if (next.url.indexOf(\"favicons/\") > -1 || next.url.indexOf(\".svg\") > -1) {\n            acc.asset.push(next.url);\n        }\n        else {\n            acc.code.push(next.url);\n        }\n        return acc;\n    }, { asset: [], code: [] });\n    let definedCaches = [\n        {\n            name: cacheNames.code,\n            assets: [\n                ...dividedAssets.code\n            ]\n        },\n        {\n            name: cacheNames.asset,\n            assets: dividedAssets.asset,\n        }\n    ];\n    event.waitUntil((async () => {\n        let tasks = definedCaches.map(async c => {\n            let cache = await caches.open(c.name);\n            await cache.addAll(c.assets);\n        });\n        await Promise.all(tasks);\n    })());\n});\n\nself.addEventListener(\"activate\", event => {\n    event.waitUntil((async () => {\n        let storedCaches = await caches.keys();\n        let expectedCaches = Object.values(cacheNames);\n        let tasks = storedCaches.filter(c => expectedCaches.indexOf(c) < 0).map(async c => {\n            await caches.delete(c);\n        })\n        await Promise.all(tasks);\n    })());\n});\n\n\nself.addEventListener(\"fetch\", function (event) {\n    if (event.request.mode === \"navigate\") {\n        if (event.request.method !== \"GET\") {\n            return;\n        }\n        event.respondWith(caches.match(\"index.html\", { cacheName: cacheNames.code }).then(response => {\n            return response || fetch(event.request);\n        }));\n        return;\n    }\n    event.respondWith(\n        caches.match(event.request).then(function (response) {\n            if (response) {\n                return response;\n            }\n            return fetch(event.request);\n        })\n    );\n});"]}