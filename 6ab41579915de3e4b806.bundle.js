"use strict";(self.webpackChunkwettma=self.webpackChunkwettma||[]).push([[151],{151:function(e,t,s){s.r(t),s.d(t,{SetResultComponent:function(){return u}});var a=s(258),i=s(557);class r{constructor(e,t,s){this.gameId=e,this.team1Goals=t,this.team2Goals=s,this.type=6}}var n=s(36),l=s(234);let o=new Intl.DateTimeFormat(["de-AT"],{weekday:"short",day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"});class u extends HTMLElement{constructor(){super(),this.innerHTML='<div class="container"> <section class="section"> <h2> Ergebnis eintragen </h2> <form> <div> <label for="game">Spiel</label> <select id="game" name="game" required="required"></select> </div> <div> <label for="team1-goals">Team1 Tore</label> <input type="number" id="team1-goals" name="team1-goals" min="0" required="required"> </div> <div> <label for="team2-goals">Team2 Tore</label> <input type="number" id="team2-goals" name="team2-goals" min="0" required="required"> </div> <button type="submit">Speichern</button> </form> <span style="display:none" id="save-failed">Speichern fehlgeschlagen</span> <span style="display:none" id="save-successful">Speichern erfolgreich</span> </section> </div>',this.store=l.y.getInstance(),this.gamesSelectRenderer=new i.T(this.querySelector("#game"),(e=>e.id),(()=>document.createElement("option"))),this.saveFailed=this.querySelector("#save-failed"),this.saveSuccess=this.querySelector("#save-successful")}connectedCallback(){this.abortController=new AbortController,this.store.subscribe((e=>this.updateState(e)),this.abortController.signal),this.updateState(this.store.state),(0,a.I)(this.querySelector("form"),"submit",(e=>this.onFormSubmit(e)),this.abortController.signal)}onFormSubmit(e){e.preventDefault();let t=new FormData(this.querySelector("form"));this.store.postAction(new r(parseInt(t.get("game")),parseInt(t.get("team1-goals")),parseInt(t.get("team2-goals"))))}updateState(e){null!=e&&(this.gamesSelectRenderer.update(e.upcomingGames,((e,t)=>{e.value=`${t.id}`,e.innerText=`${t.team1} - ${t.team2} ${o.format(t.time)}`})),this.saveFailed.style.display=e.setResultRequest==n.y.Failed?"flex":"none",this.saveSuccess.style.display=e.setResultRequest==n.y.Successful?"flex":"none")}disconnectedCallback(){this.abortController.abort()}}customElements.define("set-result-component",u)}}]);
//# sourceMappingURL=6ab41579915de3e4b806.bundle.js.map