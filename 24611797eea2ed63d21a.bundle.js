!function(){"use strict";var e,t,s,n,i,a={8930:function(e,t,s){s(285),s(5306);var n=s(8402);function i(e,t,s,n){e.addEventListener(t,s),n.addEventListener("abort",(()=>{e.removeEventListener(t,s)}))}class a extends HTMLElement{constructor(){super(),this.innerHTML='<div class="container"> <section class="section"> <nav class="link-section"> <a href="" id="back-link">zurück zur Startseite</a> </nav> <h2>"Wettma" ich werd Tippmeister</h2> <p>Tippe gegen deine Freunde und Familie auf die Spiele der Europameisterschaft 2020 (2021).</p> <p> Und so funktionierts:<br/>In der App seht ihr auf einen Blick die kommenden Spiele und gleichzeitig die dazugehörigen Quoten. Ihr könnt auf Sieg einer der beiden Mannschaften oder auf ein Unentschieden (Gruppenphase) Tippen. Je nach Fortschritt des Turniers setzt ihr eine Punktezahl auf das Siegerteam (oder ein Unentschieden). </p> <p> Ist das Spiel das ihr Tippen wollt beispielsweise Italien - Spanien sieht man schnell und einfach die dazugehörigen Quoten. (z.B. Italien - 2,3 _ Unentschieden - 2,8 _ Spanien - 1,9). Ist das ein Gruppenspiel werden z.B. 2 Punkte gesetzt und ihr würden für einen richtigen Tipp auf Spanien </p> <p> 2 * 1,9 = 3,8 Punkte </p> <p> für die Rangliste erhalten. Die Quoten werden bis zu alle 15 Minuten aktualisiert und ihr behaltet die Quote bei der ihr euren Tipp abgegeben habt. </p> <p> Hat sich eure Meinung geändert ist das auch kein Problem - ihr gebt einen neuen Tipp ab - diesmal aber mit den aktualisierten Quoten. Tipps können bis 5 Minuten vor Anpfiff des Spiels abgegeben werden. Die Siegerin oder der Sieger ist am Schluss natürlich die Person mit den meisten Punkten auf der Rangliste. </p> <p> Je fortgeschrittener das Turnier desto höher der Einsatz. So bleibt nicht nur das Turnier spannend - auch beim Tippen wird der Punktegewinn immer höher. <table class="points-table"> <thead> <tr> <td>Spielphase</td> <td>So viel Punkte ist ein Spiel wert</td> </tr> </thead> <tbody> <tr> <td>Gruppenphase</td> <td>2</td> </tr> <tr> <td>Achtelfinale</td> <td>4</td> </tr> <tr> <td>Viertelfinale</td> <td>5</td> </tr> <tr> <td>Halbfinale</td> <td>6</td> </tr> <tr> <td>Finale</td> <td>8</td> </tr> </tbody> </table> </p> </section> </div>',this.router=I.getInstance()}connectedCallback(){this.abortController=new AbortController,i(this.querySelector("a"),"click",(e=>{e.preventDefault(),this.router.router.navigate("","wettma")}),this.abortController.signal)}disconnectedCallback(){this.abortController.abort()}}customElements.define("explanation-component",a);class r{constructor(e,t,s){this.listElement=e,this.keySelector=t,this.createElement=s,this.keyToElement=new Map,this.elementToKey=new WeakMap}update(e,t){let s=new Map,n=e=>s.get(e)||(()=>{let t=this.keySelector(e);return s.set(e,t),t})();for(let s of Array.from(this.listElement.children)){let i=s,a=e.find((e=>this.elementToKey.get(i)==n(e)));a?t(i,a):this.listElement.removeChild(i)}let i=null,a=new Map;for(let s of e){let e=n(s),r=this.keyToElement.get(e);r||(r=this.createElement(s),t(r,s),this.elementToKey.set(r,e)),a.set(e,r),null==i&&r!=this.listElement.firstElementChild?this.listElement.prepend(r):null!=i&&i.nextElementSibling!=r&&i.insertAdjacentElement("afterend",r),i=r}this.keyToElement=a}}class o{constructor(){this._state=null,this.subscriptions=[],this.worker=new Worker(new URL(s.p+s.u(772),s.b)),this.worker.addEventListener("message",(e=>{this._state=e.data;for(let e of this.subscriptions)try{e.call(this._state)}catch(e){console.error("Error while updating",e)}}))}get state(){return this._state}static getInstance(){return null==this.instance&&(this.instance=new o),this.instance}subscribe(e,t){let s={call:e};this.subscriptions.push(s),t&&t.addEventListener("abort",(()=>{this.subscriptions.splice(this.subscriptions.indexOf(s),1)}))}postAction(e){this.worker.postMessage(e)}}o.instance=null;const l="choice",d="display";class c extends HTMLElement{constructor(){super(),this.innerHTML='<button type="button" class="odds-button"/>',this.btn=this.querySelector("button")}connectedCallback(){this.abortController=new AbortController,i(this.btn,"click",(e=>{e.preventDefault(),this.dispatchEvent(new CustomEvent("oddsclicked",{bubbles:!0,detail:parseInt(this.getAttribute(l))}))}),this.abortController.signal)}disconnectedCallback(){this.abortController.abort()}attributeChangedCallback(){this.updateAttributes()}updateAttributes(){this.btn.innerText=this.getAttribute(d)}static get observedAttributes(){return[l,d]}}customElements.define("odds-button",c);class h{constructor(e,t){this.oddsId=e,this.choice=t,this.type=0}}var u,m;!function(e){e[e.Team1=0]="Team1",e[e.Team2=1]="Team2",e[e.Draw=2]="Draw"}(u||(u={}));class p{constructor(e){this.gameId=e,this.type=7}}!function(e){e[e.Unset=0]="Unset",e[e.InProgress=1]="InProgress",e[e.Successful=2]="Successful",e[e.Failed=3]="Failed"}(m||(m={}));class g extends HTMLElement{constructor(){super(),this.innerHTML='<a href="" data-ref="expand-link" class="expand-link"> <span class="material-icons" data-ref="expand-arrow"> expand_more </span> <span class="expand-link__text" data-ref="expand-text"> Tipps von allen anzeigen </span> </a> <div data-ref="loading" class="status-msg saving"> <span class="material-icons" title="Tipps werden geladen."> donut_large </span> Tipps werden geladen. </div> <table class="bets-table" style="display:none"> <thead> <tr> <td> Spieler/in </td> <td>Tipp</td> </tr> </thead> <tbody></tbody> </table>',this.expandLink=this.querySelector('[data-ref="expand-link"]'),this.table=this.querySelector("table"),this.loading=this.querySelector('[data-ref="loading"]'),this.store=o.getInstance(),this.tableBody=this.querySelector("tbody"),this.expandText=this.querySelector('[data-ref="expand-text"]'),this.expandArrow=this.querySelector('[data-ref="expand-arrow"]'),this.betsRenderer=new r(this.tableBody,(e=>e.userId),(e=>{let t=document.createElement("tr"),s=document.createElement("td");t.appendChild(s);let n=document.createElement("td");return t.appendChild(n),t}))}connectedCallback(){this.abortController=new AbortController,i(this.expandLink,"click",(e=>{e.preventDefault(),this.showBets=!this.showBets,this.table.style.display=this.showBets?"":"none",this.expandArrow.classList.toggle("rotate",this.showBets),this.showBets&&this.store.postAction(new p(this.game.id)),this.expandText.innerText=this.showBets?"Tipps von allen verbergen":"Tipps von allen anzeigen"}),this.abortController.signal),this.store.subscribe((e=>{this.updateBets(e)}),this.abortController.signal)}disconnectedCallback(){this.abortController.abort()}updateBets(e){let t=e.gameBets[this.game.id];this.loading.style.display=t&&t.requestState==m.InProgress?"flex":"none",t&&t.bets&&this.betsRenderer.update(t.bets,((e,t)=>{e.children[0].innerText=t.displayName;let s=e.children[1];switch(t.choice){case u.Team1:s.innerText=this.game.team1;break;case u.Team2:s.innerText=this.game.team2;break;case u.Draw:s.innerText="Unentschieden"}}))}setGame(e){this.game=e,this.updateBets(this.store.state)}}customElements.define("bets-display",g);let b=new Intl.DateTimeFormat(["de-AT"],{weekday:"short",day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"});s.e(876).then(s.bind(s,5876));let f={"Türkei":"tr",Italien:"it",Wales:"gb-wls",Schweiz:"ch",Schweden:"se",Finnland:"fi",Deutschland:"de",England:"gb-eng","Dänemark":"dk",Russland:"ru","Österreich":"at",Belgien:"be",Kroatien:"hr",Nordmazedonien:"mk",Niederlande:"nl",Ukraine:"ua",Spanien:"es",Schottland:"gb-sct",Tschechien:"cz",Polen:"pl",Slowakei:"sk",Portugal:"pt",Ungarn:"hu",Frankreich:"fr"};class y extends HTMLElement{constructor(){super(),this.innerHTML='<form data-ref="odds-form" class="odds-form"> <h3 class="team1"> <span class="flag-icon flag-icon-tr" data-ref="team1-flag"></span> <span data-ref="team1"></span> </h3> <h3 class="team2"> <span class="flag-icon flag-icon-it" data-ref="team2-flag"></span> <span data-ref="team2"></span> </h3> <span data-ref="time" class="time"></span> <odds-button class="choice-team1" choice="0" data-ref="team1-odds"></odds-button> <odds-button class="choice-draw" choice="2" data-ref="draw-odds"></odds-button> <odds-button class="choice-team2" choice="1" data-ref="team2-odds"></odds-button> </form> <div data-ref="my-bet" class="status-msg my-bet"> <span class="material-icons" title="Tipp abgegeben"> done </span> <span> Dein Tipp <strong> <span data-ref="my-bet-team"></span> </strong> für <strong> <span data-ref="my-bet-odds"></span></strong>. </span> </div> <div data-ref="saving" class="status-msg saving"> <span class="material-icons" title="Tipp wird gepeichert."> donut_large </span> Dein Tipp wird gespeichert. </div> <div data-ref="odds-changed-error" class="status-msg warning"> <span class="material-icons" title="Tipp nicht gespeichert: Quoten geändert"> warning </span> Dein Tipp wurde nicht gespeichert, weil sich die Quoten geändert haben. </div> <div data-ref="game-started-error" class="status-msg error"> <span class="material-icons" title="Spiel hat bereits begonnen"> error </span> Dein Tipp wurde nicht gespeichert, weil das Spiel bereits begonnen hat. </div> <div data-ref="save-error" class="status-msg error"> <span class="material-icons" title="Tipp konnte nicht gespeichert werden"> error </span> Beim Speichern ist ein Fehler aufgetreten. </div>',this.team1Label=this.querySelector('[data-ref="team1"]'),this.team2Label=this.querySelector('[data-ref="team2"]'),this.team1Odds=this.querySelector('[data-ref="team1-odds"]'),this.drawOdds=this.querySelector('[data-ref="draw-odds"]'),this.team2Odds=this.querySelector('[data-ref="team2-odds"]'),this.oddsForm=this.querySelector('[data-ref="odds-form"]'),this.timeDisplay=this.querySelector('[data-ref="time"]'),this.myBetContainer=this.querySelector('[data-ref="my-bet"]'),this.myBetTeam=this.querySelector('[data-ref="my-bet-team"]'),this.myBetOdds=this.querySelector('[data-ref="my-bet-odds"]'),this.saving=this.querySelector('[data-ref="saving"]'),this.oddsChangedError=this.querySelector('[data-ref="odds-changed-error"]'),this.gameStartedError=this.querySelector('[data-ref="game-started-error"]'),this.unknownError=this.querySelector('[data-ref="save-error"]'),this.team1Flag=this.querySelector('[data-ref="team1-flag"]'),this.team2Flag=this.querySelector('[data-ref="team2-flag"]'),this.store=o.getInstance()}connectedCallback(){this.abortController=new AbortController,i(this.oddsForm,"oddsclicked",(e=>{this.store.postAction(new h(this.game.odds.id,e.detail))}),this.abortController.signal)}disconnectedCallback(){this.abortController.abort()}setGame(e){var t,s,n;this.game=e,this.team1Label.innerText=e.team1,this.team2Label.innerText=e.team2,this.timeDisplay.innerText=b.format(e.time),this.team1Flag.className=`flag-icon flag-icon-${f[e.team1]}`,this.team2Flag.className=`flag-icon flag-icon-${f[e.team2]}`,this.team1Odds.style.visibility=e.odds?"visible":"hidden",this.drawOdds.style.visibility=e.odds?"visible":"hidden",this.team2Odds.style.visibility=e.odds?"visible":"hidden",e.odds&&(this.team1Odds.setAttribute(d,`${e.odds.team1.toFixed(2)}`),this.drawOdds.setAttribute(d,`${e.odds.draw.toFixed(2)}`),this.team2Odds.setAttribute(d,`${e.odds.team2.toFixed(2)}`)),this.myBetContainer.style.display=e.myBet&&!e.saving?"flex":"none",e.myBet&&(this.myBetTeam.innerText=e.myBet.choice==u.Team1?e.team1:e.myBet.choice==u.Team2?e.team2:"Unentschieden",this.myBetOdds.innerText=`${e.myBet.choice==u.Team1?e.myBet.odds.team1:e.myBet.choice==u.Team2?e.myBet.odds.team2:e.myBet.odds.draw}`),this.saving.style.display=e.saving?"flex":"none",this.oddsChangedError.style.display=(null===(t=e.saveError)||void 0===t?void 0:t.oddsChanged)?"flex":"none",this.gameStartedError.style.display=(null===(s=e.saveError)||void 0===s?void 0:s.gameStarted)?"flex":"none",this.unknownError.style.display=(null===(n=e.saveError)||void 0===n?void 0:n.unknown)?"flex":"none",+e.time<+new Date?this.betsDisplay||(this.betsDisplay=new g,this.appendChild(this.betsDisplay)):this.betsDisplay&&(this.removeChild(this.betsDisplay),this.betsDisplay=null),this.betsDisplay&&this.betsDisplay.setGame(e)}}customElements.define("upcoming-game-display",y);let v=new Intl.DateTimeFormat(["de-AT"],{weekday:"short",day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),w={"Türkei":"tr",Italien:"it",Wales:"gb-wls",Schweiz:"ch",Schweden:"se",Finnland:"fi",Deutschland:"de",England:"gb-eng","Dänemark":"dk",Russland:"ru","Österreich":"at",Belgien:"be",Kroatien:"hr",Nordmazedonien:"mk",Niederlande:"nl",Ukraine:"ua",Spanien:"es",Schottland:"gb-sct",Tschechien:"cz",Polen:"pl",Slowakei:"sk",Portugal:"pt",Ungarn:"hu",Frankreich:"fr"};class S extends HTMLElement{constructor(){super(),this.innerHTML='<div class="finished-game"> <h3 class="team1"> <span class="flag-icon flag-icon-tr" data-ref="team1-flag"></span> <span data-ref="team1"></span> </h3> <h3 class="team2"> <span class="flag-icon flag-icon-it" data-ref="team2-flag"></span> <span data-ref="team2"></span> </h3> <span data-ref="time" class="time"></span> <h3 class="goals1" data-ref="goals1"></h3> <h3 class="goals2" data-ref="goals2"></h3> </div> <div data-ref="correct-bet" class="status-msg correct-bet"> <span class="material-icons" title="Tipp abgegeben"> done </span> <span> Dein Tipp <strong> <span data-ref="my-bet-team"></span> </strong> für <strong> <span data-ref="my-bet-odds"></span></strong> war richtig. </span> </div> <div data-ref="wrong-bet" class="status-msg wrong-bet"> <span class="material-icons" title="Tipp abgegeben"> close </span> <span> Dein Tipp <strong> <span data-ref="my-bet-team"></span> </strong> für <strong> <span data-ref="my-bet-odds"></span></strong> war leider nicht richtig. </span> </div>',this.team1Label=this.querySelector('[data-ref="team1"]'),this.team2Label=this.querySelector('[data-ref="team2"]'),this.timeDisplay=this.querySelector('[data-ref="time"]'),this.correctBet=this.querySelector('[data-ref="correct-bet"]'),this.wrongBet=this.querySelector('[data-ref="wrong-bet"]'),this.team1Flag=this.querySelector('[data-ref="team1-flag"]'),this.team2Flag=this.querySelector('[data-ref="team2-flag"]'),this.goals1=this.querySelector('[data-ref="goals1"]'),this.goals2=this.querySelector('[data-ref="goals2"]'),this.store=o.getInstance()}connectedCallback(){this.abortController=new AbortController}disconnectedCallback(){this.abortController.abort()}setGame(e){this.game=e,this.team1Label.innerText=e.team1,this.team2Label.innerText=e.team2,this.timeDisplay.innerText=v.format(e.time),this.team1Flag.className=`flag-icon flag-icon-${w[e.team1]}`,this.team2Flag.className=`flag-icon flag-icon-${w[e.team2]}`,this.goals1.innerText=e.result.team1Goals+"",this.goals2.innerText=e.result.team2Goals+"";let t=this.game.myBet&&(this.game.myBet.choice==u.Team1&&this.game.result.team1Goals>this.game.result.team2Goals||this.game.myBet.choice==u.Team2&&this.game.result.team1Goals<this.game.result.team2Goals||this.game.myBet.choice==u.Draw&&this.game.result.team1Goals==this.game.result.team2Goals),s=this.game.myBet&&!t;if(this.correctBet.style.display=t?"flex":"none",this.wrongBet.style.display=s?"flex":"none",this.game.myBet){for(let t of this.querySelectorAll('[data-ref="my-bet-team"]'))t.innerText=e.myBet.choice==u.Team1?e.team1:e.myBet.choice==u.Team2?e.team2:"Unentschieden";for(let t of this.querySelectorAll('[data-ref="my-bet-odds"]'))t.innerText=`${e.myBet.choice==u.Team1?e.myBet.odds.team1:e.myBet.choice==u.Team2?e.myBet.odds.team2:e.myBet.odds.draw}`}}}customElements.define("finished-game-display",S);class k extends HTMLElement{constructor(){super(),this.innerHTML='<div class="container"> <section class="section"> <nav class="link-section"> <a href="#finished-gamesh">Vergangene Spiele</a> <a href="scoreboard" title="Rangliste - wettma" id="scoreboard-link" data-ref="spa-link">Rangliste</a> <a href="explanation" title="Spielanleitung - wettma" id="explanation-link" data-ref="spa-link">Spielanleitung</a> </nav> <h2> Nächste Spiele </h2> <ol id="upcoming-games" class="gameslist"> </ol> <h2 id="finished-gamesh"> Vergangene Spiele </h2> <ol id="finished-games" class="gameslist"> </ol> </section> </div>',this.store=o.getInstance(),this.router=I.getInstance(),this.upcomingGamesList=this.querySelector("#upcoming-games"),this.finishedGamesList=this.querySelector("#finished-games"),this.upcomingGamesRenderer=new r(this.upcomingGamesList,(e=>e.id),(e=>{let t=document.createElement("li");return t.appendChild(new y),t})),this.finishedGamesRenderer=new r(this.finishedGamesList,(e=>e.id),(e=>{let t=document.createElement("li");return t.appendChild(new S),t}))}connectedCallback(){this.abortController=new AbortController,this.store.subscribe((e=>this.updateState(e)),this.abortController.signal),this.updateState(this.store.state);for(let e of this.querySelectorAll('[data-ref="spa-link"]'))i(e,"click",(t=>{t.preventDefault(),this.router.router.navigate(e.getAttribute("href"),e.getAttribute("title"))}),this.abortController.signal)}updateState(e){null!=e&&(this.upcomingGamesRenderer.update(e.upcomingGames,((e,t)=>{e.children[0].setGame(t)})),this.finishedGamesRenderer.update(e.finishedGames,((e,t)=>{e.children[0].setGame(t)})))}disconnectedCallback(){this.abortController.abort()}}customElements.define("home-component",k);class T extends HTMLElement{constructor(){super(),this.innerHTML='<form method="GET" action="https://accounts.google.com/o/oauth2/v2/auth" id="login_form"> <input type="hidden" name="client_id" id="client_id" value="439677686972-2c42enpqguk403j6nsb225e509n60ul9.apps.googleusercontent.com"> <input type="hidden" name="redirect_uri" id="redirect_uri"> <input type="hidden" name="response_type" value="token id_token"> <input type="hidden" name="login_hint" id="login_hint"> <input type="hidden" name="nonce" id="nonce"> <input type="hidden" name="scope" value="openid"> <button type="submit">Login über Google</button> </form>'}connectedCallback(){this.nonceInput=this.querySelector("#nonce"),this.redirectUriInput=this.querySelector("#redirect_uri"),this.redirectUriInput.value=window.location.href.replace(/\/(login|explanation|scoreboard|setresult)|(\?.+)|(\#.+)/g,"").replace(/(\/$)/g,""),this.loginHintInput=this.querySelector("#login_hint"),this.loginForm=this.querySelector("#login_form"),this.nonceInput.value=function(e){for(var t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<8;n++)t+=s.charAt(Math.floor(Math.random()*s.length));return t}()}disconnectedCallback(){}setLoginHint(e){this.loginHintInput.value=e}submit(){this.loginForm.submit()}}customElements.define("login-form",T);class C extends HTMLElement{constructor(){super(),this.innerHTML='<div class="container"> <section class="section"> <h2> Login </h2> <p>Du musst dich zuerst anmelden bevor du fortfahren kannst.</p> <login-form></login-form> </section> </div>',this.loginForm=this.querySelector("login-form")}connectedCallback(){"FederatedCredential"in window&&navigator.credentials.get({federated:{providers:["https://google.wettma.kesal.at"]},mediation:"optional"}).then((e=>{e&&"federated"==e.type&&(this.loginForm.setLoginHint(e.id),this.loginForm.submit())}))}disconnectedCallback(){}}customElements.define("login-component",C);class x{constructor(e){this.displayName=e,this.type=3}}class E extends HTMLElement{constructor(){super(),this.innerHTML='<div class="container"> <section class="section"> <h2> Anzeigenamen </h2> <p>Lege einen Anzeigenamen fest. Dieser wird <strong>für alle ersichtlich</strong> in der Rangliste angezeigt.</p> <form> <label for="display-name">Anzeigename</label> <input type="text" id="display-name" name="display-name" maxlength="15" required="required"> <button type="submit">Speichern</button> </form> <span style="display:none" id="register-failed">Registrierung fehlgeschlagen</span> </section> </div>',this.form=this.querySelector("form"),this.registerFailed=this.querySelector("#register-failed"),this.store=o.getInstance(),this.router=I.getInstance()}connectedCallback(){this.abortController=new AbortController,i(this.form,"submit",(e=>this.onFormSubmit(e)),this.abortController.signal),this.store.subscribe((e=>this.updateState(e)),this.abortController.signal),this.updateState(this.store.state)}updateState(e){null!=e&&(e.register==m.Successful&&this.router.router.navigate("","wettma",!0),this.registerFailed.style.display=e.register==m.Failed?"inline":"none")}onFormSubmit(e){e.preventDefault();let t=new FormData(this.form).get("display-name");this.store.postAction(new x(t))}disconnectedCallback(){this.abortController.abort()}}customElements.define("register-component",E);class q{constructor(){this.type=5}}class L extends HTMLElement{constructor(){super(),this.innerHTML='<div class="container"> <section class="section"> <nav class="link-section"> <a href="" id="back-link">zurück zur Startseite</a> </nav> <h2> Rangliste </h2> <div id="scoreboard-load-error" class="status-msg error" style="display:none"> <span class="material-icons" title="Tipp konnte nicht gespeichert werden"> error </span> Rangliste konnte nicht geladen werden. </div> <table class="scoreboard-table"> <thead> <tr> <td>Spieler/in</td> <td>Punkte</td> </tr> </thead> <tbody> </tbody> </table> </section> </div>',this.store=o.getInstance(),this.router=I.getInstance(),this.tableBody=this.querySelector("tbody"),this.scoreboardLoadError=this.querySelector("#scoreboard-load-error"),this.scoreboardRenderer=new r(this.tableBody,(e=>e.userId),(e=>{let t=document.createElement("tr"),s=document.createElement("td");t.appendChild(s);let n=document.createElement("td");return t.appendChild(n),t}))}connectedCallback(){this.abortController=new AbortController,this.store.postAction(new q),this.store.subscribe((e=>{this.scoreboardRenderer.update(e.scoreboard,((e,t)=>{e.children[0].innerText=t.displayName,e.children[1].innerText=`${t.points.toFixed(2)}`})),this.scoreboardLoadError.style.display=e.scoreboardRequest==m.Failed?"flex":"none"}),this.abortController.signal),i(this.querySelector("a"),"click",(e=>{e.preventDefault(),this.router.router.navigate("","wettma")}),this.abortController.signal)}disconnectedCallback(){this.abortController.abort()}}customElements.define("scoreboard-component",L);class B{constructor(e,t,s){this.gameId=e,this.team1Goals=t,this.team2Goals=s,this.type=6}}let A=new Intl.DateTimeFormat(["de-AT"],{weekday:"short",day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"});class F extends HTMLElement{constructor(){super(),this.innerHTML='<div class="container"> <section class="section"> <h2> Ergebnis eintragen </h2> <form> <div> <label for="game">Spiel</label> <select id="game" name="game" required="required"></select> </div> <div> <label for="team1-goals">Team1 Tore</label> <input type="number" id="team1-goals" name="team1-goals" min="0" required="required"> </div> <div> <label for="team2-goals">Team2 Tore</label> <input type="number" id="team2-goals" name="team2-goals" min="0" required="required"> </div> <button type="submit">Speichern</button> </form> <span style="display:none" id="save-failed">Speichern fehlgeschlagen</span> <span style="display:none" id="save-successful">Speichern erfolgreich</span> </section> </div>',this.store=o.getInstance(),this.gamesSelectRenderer=new r(this.querySelector("#game"),(e=>e.id),(()=>document.createElement("option"))),this.saveFailed=this.querySelector("#save-failed"),this.saveSuccess=this.querySelector("#save-successful")}connectedCallback(){this.abortController=new AbortController,this.store.subscribe((e=>this.updateState(e)),this.abortController.signal),this.updateState(this.store.state),i(this.querySelector("form"),"submit",(e=>this.onFormSubmit(e)),this.abortController.signal)}onFormSubmit(e){e.preventDefault();let t=new FormData(this.querySelector("form"));this.store.postAction(new B(parseInt(t.get("game")),parseInt(t.get("team1-goals")),parseInt(t.get("team2-goals"))))}updateState(e){null!=e&&(this.gamesSelectRenderer.update(e.upcomingGames,((e,t)=>{e.value=`${t.id}`,e.innerText=`${t.team1} - ${t.team2} ${A.format(t.time)}`})),this.saveFailed.style.display=e.setResultRequest==m.Failed?"flex":"none",this.saveSuccess.style.display=e.setResultRequest==m.Successful?"flex":"none")}disconnectedCallback(){this.abortController.abort()}}customElements.define("set-result-component",F);class I{constructor(){let e=this;this.router=new n.F0(new class{async resolve(t,s,n){switch(s){case"login":return e.activeRoute="login",new C;case"register":return e.activeRoute="register",new E;case"explanation":return e.activeRoute="explanation",new a;case"scoreboard":return e.activeRoute="scoreboard",new L;case"setresult":return e.activeRoute="setresult",new F;default:return e.activeRoute="home",new k}}},new n.NP(document.getElementById("content")))}static getInstance(){return null==this.instance&&(this.instance=new I),this.instance}}I.instance=null;class D{constructor(e){this.accessToken=e,this.type=2}}class M{constructor(){this.type=1}}class R{constructor(){this.type=4}}class _ extends HTMLElement{constructor(){super(),this.innerHTML='<div class="app-bar__container"> <nav class="app-bar"> <a href=""> <h1> <span class="material-icons"> sports_soccer </span> wettma</h1> </a> <div class="user-container" id="user-container"> <span id="logged-in-user"></span> <button id="logout" style="display:none">Logout</button> <button id="login" style="display:none">Login</button> </div> </nav> </div>',this.store=o.getInstance(),this.router=I.getInstance(),this.displayName=this.querySelector("#logged-in-user"),this.logoutBtn=this.querySelector("#logout"),this.loginBtn=this.querySelector("#login"),this.userContainer=this.querySelector("#user-container")}connectedCallback(){this.abortController=new AbortController,i(this.logoutBtn,"click",(e=>{this.store.postAction(new R),sessionStorage.clear()}),this.abortController.signal),i(this.loginBtn,"click",(e=>{this.router.router.navigate("login","wettma - Login")}),this.abortController.signal),this.store.subscribe((e=>this.updateState(e)),this.abortController.signal),this.updateState(this.store.state),i(this.querySelector("a"),"click",(e=>{e.preventDefault(),this.router.router.navigate("","wettma")}),this.abortController.signal)}updateState(e){null!=e&&(this.displayName.innerText=e.displayName||"",this.displayName.style.display=e.accessToken?"inline":"none",this.logoutBtn.style.display=e.accessToken?"inline":"none",this.loginBtn.style.display=e.accessToken?"none":"inline")}disconnectedCallback(){this.abortController.abort()}}customElements.define("app-bar",_),"serviceWorker"in navigator&&window.addEventListener("load",(async()=>{navigator.serviceWorker.register("./sw.js").then((e=>{})).catch((e=>{console.log("SW registration failed: ",e)}))})),async function(){let e=I.getInstance();e.router.run();let t=o.getInstance();t.subscribe((s=>{s.goToLogin&&"login"!=e.activeRoute?(t.postAction(new M),e.router.navigate("login","wettma - Login")):s.goToRegister&&"register"!=e.activeRoute&&(t.postAction(new M),e.router.navigate("register","wettma - Registrieren"))}));let s=await async function(){const e="wettma-webapp-token";let t=new URLSearchParams(window.location.hash.replace(/^#/,"")),s=t.get("id_token");if(s){history.replaceState(null,null," ");let i=await fetch(`https://oauth2.googleapis.com/tokeninfo?id_token=${s}`),a=await i.json();if(!i.ok)throw new Error(`access token validation resulted in ${i.status}`);let r={token:s,exp:+new Date+1e3*parseInt(t.get("expires_in")),scope:a.scope,sub:a.sub};if(sessionStorage.setItem(e,JSON.stringify(r)),"FederatedCredential"in window){var n=await navigator.credentials.create({federated:{id:a.sub,provider:"https://google.wettma.kesal.at/"}});await navigator.credentials.store(n)}return r}{let t=sessionStorage.getItem(e);if(null!=t){let e=JSON.parse(t);if(e.exp>+new Date)return e}}return null}();t.postAction(new D(s))}().catch((e=>console.error(e)))}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={exports:{}};return a[e](s,s.exports,o),s.exports}o.m=a,e=[],o.O=function(t,s,n,i){if(!s){var a=1/0;for(d=0;d<e.length;d++){s=e[d][0],n=e[d][1],i=e[d][2];for(var r=!0,l=0;l<s.length;l++)(!1&i||a>=i)&&Object.keys(o.O).every((function(e){return o.O[e](s[l])}))?s.splice(l--,1):(r=!1,i<a&&(a=i));r&&(e.splice(d--,1),t=n())}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,n,i]},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,s){return o.f[s](e,t),t}),[]))},o.u=function(e){return{772:"9ee575255bf6bc40a8ed",876:"e3eb66b34a4a0f3e9c7f"}[e]+".bundle.js"},o.miniCssF=function(e){return e+".d8996ba4bed2b9583ae2.css"},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t={},s="wettma:",o.l=function(e,n,i,a){if(t[e])t[e].push(n);else{var r,l;if(void 0!==i)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var h=d[c];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==s+i){r=h;break}}r||(l=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.setAttribute("data-webpack",s+i),r.src=e),t[e]=[n];var u=function(s,n){r.onerror=r.onload=null,clearTimeout(m);var i=t[e];if(delete t[e],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((function(e){return e(n)})),s)return s(n)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),l&&document.head.appendChild(r)}},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="/",n=function(e){return new Promise((function(t,s){var n=o.miniCssF(e),i=o.p+n;if(function(e,t){for(var s=document.getElementsByTagName("link"),n=0;n<s.length;n++){var i=(r=s[n]).getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(i===e||i===t))return r}var a=document.getElementsByTagName("style");for(n=0;n<a.length;n++){var r;if((i=(r=a[n]).getAttribute("data-href"))===e||i===t)return r}}(n,i))return t();!function(e,t,s,n){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=function(a){if(i.onerror=i.onload=null,"load"===a.type)s();else{var r=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=o,i.parentNode.removeChild(i),n(l)}},i.href=t,document.head.appendChild(i)}(e,i,t,s)}))},i={826:0},o.f.miniCss=function(e,t){i[e]?t.push(i[e]):0!==i[e]&&{876:1}[e]&&t.push(i[e]=n(e).then((function(){i[e]=0}),(function(t){throw delete i[e],t})))},function(){o.b=document.baseURI||self.location.href;var e={826:0};o.f.j=function(t,s){var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var i=new Promise((function(s,i){n=e[t]=[s,i]}));s.push(n[2]=i);var a=o.p+o.u(t),r=new Error;o.l(a,(function(s){if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",r.name="ChunkLoadError",r.type=i,r.request=a,n[1](r)}}),"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,i,a=s[0],r=s[1],l=s[2],d=0;for(n in r)o.o(r,n)&&(o.m[n]=r[n]);if(l)var c=l(o);for(t&&t(s);d<a.length;d++)i=a[d],o.o(e,i)&&e[i]&&e[i][0](),e[a[d]]=0;return o.O(c)},s=self.webpackChunkwettma=self.webpackChunkwettma||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var l=o.O(void 0,[401],(function(){return o(8930)}));l=o.O(l)}();
//# sourceMappingURL=24611797eea2ed63d21a.bundle.js.map