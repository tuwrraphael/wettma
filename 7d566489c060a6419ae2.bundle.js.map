{"version":3,"sources":["webpack://wettma/webpack/runtime/chunk loaded","webpack://wettma/./src/ArrayToElementRenderer.ts","webpack://wettma/./src/state/store.ts","webpack://wettma/./src/abortable-event-listener.ts","webpack://wettma/./src/components/OddsButton/OddsButton.ts","webpack://wettma/./src/components/OddsButton/OddsButton.html","webpack://wettma/./src/state/requests/CreateBetAction.ts","webpack://wettma/./src/api/models.ts","webpack://wettma/./src/components/UpcomingGameDisplay/UpcomingGameDisplay.ts","webpack://wettma/./src/components/UpcomingGameDisplay/UpcomingGameDisplay.html","webpack://wettma/./src/components/HomeComponent/HomeComponent.ts","webpack://wettma/./src/components/HomeComponent/HomeComponent.html","webpack://wettma/./src/components/LoginComponent/LoginComponent.html","webpack://wettma/./src/state/state.ts","webpack://wettma/./src/components/LoginForm/LoginForm.ts","webpack://wettma/./src/components/LoginForm/LoginForm.html","webpack://wettma/./src/components/LoginComponent/LoginComponent.ts","webpack://wettma/./src/state/requests/RegisterAction.ts","webpack://wettma/./src/components/RegisterComponent/RegisterComponent.ts","webpack://wettma/./src/components/RegisterComponent/RegisterComponent.html","webpack://wettma/./src/app-router.ts","webpack://wettma/./src/state/requests/Initialize.ts","webpack://wettma/./src/state/requests/LoginPageOpened.ts","webpack://wettma/./src/state/requests/LogoutAction.ts","webpack://wettma/./src/components/AppBar/AppBar.ts","webpack://wettma/./src/components/AppBar/AppBar.html","webpack://wettma/./src/index.ts","webpack://wettma/webpack/bootstrap","webpack://wettma/webpack/runtime/compat get default export","webpack://wettma/webpack/runtime/define property getters","webpack://wettma/webpack/runtime/get javascript chunk filename","webpack://wettma/webpack/runtime/global","webpack://wettma/webpack/runtime/hasOwnProperty shorthand","webpack://wettma/webpack/runtime/publicPath","webpack://wettma/webpack/runtime/jsonp chunk loading","webpack://wettma/webpack/startup"],"names":["deferred","ArrayToElementRenderer","listElement","keySelector","createElement","this","keyToElement","Map","elementToKey","WeakMap","list","updateElement","keyCache","getKey","d","get","key","set","x","Array","from","children","el","data","find","i","removeChild","before","nextKeyToElement","t","childElement","firstElementChild","prepend","nextElementSibling","insertAdjacentElement","Store","_state","subscriptions","worker","Worker","URL","addEventListener","ev","s","call","err","console","error","instance","signal","sub","push","splice","indexOf","action","postMessage","abortableEventListener","element","event","listenerFn","removeEventListener","ChoiceAttribute","DisplayAttribute","OddsButton","HTMLElement","super","innerHTML","btn","querySelector","abortController","AbortController","e","preventDefault","dispatchEvent","CustomEvent","bubbles","detail","parseInt","getAttribute","abort","updateAttributes","innerText","customElements","define","CreateBetAction","oddsId","choice","type","Choice","i18nFormat","Intl","DateTimeFormat","weekday","day","month","hour","minute","UpcomingGameDisplay","team1Label","team2Label","team1Odds","drawOdds","team2Odds","oddsForm","timeDisplay","myBetContainer","myBetTeam","myBetOdds","saving","oddsChangedError","gameStartedError","unknownError","store","getInstance","postAction","game","odds","id","team1","team2","style","visibility","setAttribute","draw","format","time","display","myBet","Team1","Team2","saveError","oddsChanged","gameStarted","unknown","HomeComponent","upcomingGamesList","upcomingGamesRenderer","g","li","document","appendChild","subscribe","updateState","state","update","upcomingGames","setGame","RequestState","LoginForm","nonceInput","redirectUriInput","value","window","location","href","replace","loginHintInput","loginForm","length","text","possible","charAt","Math","floor","random","nonce","hint","submit","LoginComponent","navigator","credentials","federated","providers","mediation","then","c","setLoginHint","RegisterAction","displayName","RegisterComponent","form","registerFailed","router","AppRouter","onFormSubmit","register","Successful","navigate","Failed","name","FormData","self","lastRoute","currentRoute","activeRoute","getElementById","Initialize","accessToken","LoginPageOpened","LogoutAction","AppBar","logoutBtn","loginBtn","userContainer","sessionStorage","clear","async","serviceWorker","registration","catch","registrationError","log","appRouter","run","goToLogin","goToRegister","sessionStorageKey","searchParameters","URLSearchParams","hash","tokenFromUrl","history","replaceState","res","fetch","tokenInfo","json","ok","Error","status","token","exp","Date","scope","setItem","JSON","stringify","cred","create","provider","sessionToken","getItem","parsed","parse","getAccessToken","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","n","getter","__esModule","a","definition","o","defineProperty","enumerable","u","chunkId","globalThis","Function","obj","prop","prototype","hasOwnProperty","p","b","baseURI","installedChunks","826","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","forEach","bind","__webpack_exports__"],"mappings":"6BAAIA,E,qDCAE,MAAOC,EAIT,YAAoBC,EACRC,EACAC,GAFQ,KAAAF,cACR,KAAAC,cACA,KAAAC,gBACRC,KAAKC,aAAe,IAAIC,IACxBF,KAAKG,aAAe,IAAIC,QAG5B,OAAOC,EAAWC,GACd,IAAIC,EAAW,IAAIL,IACfM,EAAUC,GAASF,EAASG,IAAID,IAAM,MACtC,IAAIE,EAAMX,KAAKF,YAAYW,GAE3B,OADAF,EAASK,IAAIH,EAAGE,GACTA,GAH+B,GAK1C,IAAK,IAAIE,KAAKC,MAAMC,KAAKf,KAAKH,YAAYmB,UAAW,CACjD,IAAIC,EAAWJ,EACXK,EAAOb,EAAKc,MAAKC,GAAKpB,KAAKG,aAAaO,IAAIO,IAAOT,EAAOY,KAC1DF,EACAZ,EAAiBW,EAAIC,GAGrBlB,KAAKH,YAAYwB,YAAYJ,GAGrC,IAAIK,EAAkB,KAClBC,EAAmB,IAAIrB,IAC3B,IAAK,IAAIsB,KAAKnB,EAAM,CAChB,IAAIM,EAAMH,EAAOgB,GACbC,EAAkBzB,KAAKC,aAAaS,IAAIC,GACvCc,IACDA,EAAezB,KAAKD,cAAcyB,GAClClB,EAAcmB,EAAcD,GAC5BxB,KAAKG,aAAaS,IAAIa,EAAcd,IAExCY,EAAiBX,IAAID,EAAKc,GACtB,MAAQH,GAAUG,GAAgBzB,KAAKH,YAAY6B,kBACnD1B,KAAKH,YAAY8B,QAAQF,GAEpB,MAAQH,GAAUA,EAAOM,oBAAsBH,GACpDH,EAAOO,sBAAsB,WAAYJ,GAE7CH,EAASG,EAEbzB,KAAKC,aAAesB,GCxCtB,MAAOO,EAiBT,cAbQ,KAAAC,OAAgB,KAcpB/B,KAAKgC,cAAgB,GACrBhC,KAAKiC,OAAS,IAAIC,OAAO,IAAIC,IAAI,mBACjCnC,KAAKiC,OAAOG,iBAAiB,WAAWC,IACpCrC,KAAK+B,OAASM,EAAGnB,KACjB,IAAK,IAAIoB,KAAKtC,KAAKgC,cACf,IACIM,EAAEC,KAAKvC,KAAK+B,QAEhB,MAAOS,GACHC,QAAQC,MAAM,uBAAwBF,OArB7C,YACL,OAAOxC,KAAK+B,OAGE,qBAId,OAHI,MAAQ/B,KAAK2C,WACb3C,KAAK2C,SAAW,IAAIb,GAEjB9B,KAAK2C,SAoBhB,UAAUJ,EAA0BK,GAChC,IAAIC,EAAM,CAAEN,QACZvC,KAAKgC,cAAcc,KAAKD,GACpBD,GACAA,EAAOR,iBAAiB,SAAS,KAC7BpC,KAAKgC,cAAce,OAAO/C,KAAKgC,cAAcgB,QAAQH,GAAM,MAKvE,WAAWI,GACPjD,KAAKiC,OAAOiB,YAAYD,ICpD1B,SAAUE,EAI0FC,EAAuBC,EAAeC,EAAyBV,GACrKQ,EAAQhB,iBAAiBiB,EAAOC,GAChCV,EAAOR,iBAAiB,SAAS,KAC7BgB,EAAQG,oBAAoBF,EAAOC,MDCxB,EAAAX,SAAkB,KEJ9B,MAAMa,EAAkB,SAClBC,EAAmB,UAE1B,MAAOC,UAAmBC,YAI5B,cACIC,QACA5D,KAAK6D,UCZF,8CDaH7D,KAAK8D,IAAM9D,KAAK+D,cAAc,UAGlC,oBACI/D,KAAKgE,gBAAkB,IAAIC,gBAC3Bd,EAAuBnD,KAAK8D,IAAK,SAASI,IACtCA,EAAEC,iBACFnE,KAAKoE,cAAc,IAAIC,YAAY,cAAe,CAAEC,SAAS,EAAMC,OAAQC,SAASxE,KAAKyE,aAAajB,SACvGxD,KAAKgE,gBAAgBpB,QAG5B,uBACI5C,KAAKgE,gBAAgBU,QAGzB,2BACI1E,KAAK2E,mBAGD,mBACJ3E,KAAK8D,IAAIc,UAAY5E,KAAKyE,aAAahB,GAGd,gCACzB,MAAO,CAACD,EAAiBC,IAIjCoB,eAAeC,OAAO,cAAepB,GEtC/B,MAAOqB,EACT,YAAmBC,EAAuBC,GAAvB,KAAAD,SAAuB,KAAAC,SACjC,KAAAC,KAAI,GCmCjB,IAAYC,GAAZ,SAAYA,GACR,qBACA,qBACA,mBAHJ,CAAYA,MAAM,KC/BlB,IAAIC,EAAa,IAAIC,KAAKC,eAAe,CAAC,SAAU,CAAEC,QAAS,QAASC,IAAK,UAAWC,MAAO,UAAWC,KAAM,UAAWC,OAAQ,YAE7H,MAAOC,UAA4BjC,YAmBrC,cACIC,QACA5D,KAAK6D,UChCF,24CDiCH7D,KAAK6F,WAAa7F,KAAK+D,cAAc,sBACrC/D,KAAK8F,WAAa9F,KAAK+D,cAAc,sBACrC/D,KAAK+F,UAAY/F,KAAK+D,cAAc,2BACpC/D,KAAKgG,SAAWhG,KAAK+D,cAAc,0BACnC/D,KAAKiG,UAAYjG,KAAK+D,cAAc,2BACpC/D,KAAKkG,SAAWlG,KAAK+D,cAAc,0BACnC/D,KAAKmG,YAAcnG,KAAK+D,cAAc,qBACtC/D,KAAKoG,eAAiBpG,KAAK+D,cAAc,uBACzC/D,KAAKqG,UAAYrG,KAAK+D,cAAc,4BACpC/D,KAAKsG,UAAYtG,KAAK+D,cAAc,4BACpC/D,KAAKuG,OAASvG,KAAK+D,cAAc,uBACjC/D,KAAKwG,iBAAmBxG,KAAK+D,cAAc,mCAC3C/D,KAAKyG,iBAAmBzG,KAAK+D,cAAc,mCAC3C/D,KAAK0G,aAAe1G,KAAK+D,cAAc,2BACvC/D,KAAK2G,MAAQ7E,EAAM8E,cAGvB,oBACI5G,KAAKgE,gBAAkB,IAAIC,gBAC3Bd,EAAuBnD,KAAKkG,SAAU,eAAgB7D,IAClDrC,KAAK2G,MAAME,WAAW,IAAI9B,EAAgB/E,KAAK8G,KAAKC,KAAKC,GAAI3E,EAAGkC,WACjEvE,KAAKgE,gBAAgBpB,QAG5B,uBACI5C,KAAKgE,gBAAgBU,QAGzB,QAAQoC,G,UACJ9G,KAAK8G,KAAOA,EACZ9G,KAAK6F,WAAWjB,UAAYkC,EAAKG,MACjCjH,KAAK8F,WAAWlB,UAAYkC,EAAKI,MACjClH,KAAKkG,SAASiB,MAAMC,WAAaN,EAAKC,KAAO,UAAY,SACrDD,EAAKC,OACL/G,KAAK+F,UAAUsB,aAAa5D,EAAkB,GAAGqD,EAAKC,KAAKE,SAC3DjH,KAAKgG,SAASqB,aAAa5D,EAAkB,GAAGqD,EAAKC,KAAKO,QAC1DtH,KAAKiG,UAAUoB,aAAa5D,EAAkB,GAAGqD,EAAKC,KAAKG,SAC3DlH,KAAKmG,YAAYvB,UAAYQ,EAAWmC,OAAOT,EAAKU,OAExDxH,KAAKoG,eAAee,MAAMM,QAAUX,EAAKY,QAAUZ,EAAKP,OAAS,OAAS,OACtEO,EAAKY,QACL1H,KAAKqG,UAAUzB,UAAYkC,EAAKY,MAAMzC,QAAUE,EAAOwC,MAAQb,EAAKG,MAAQH,EAAKY,MAAMzC,QAAUE,EAAOyC,MAAQd,EAAKI,MAAQ,gBAC7HlH,KAAKsG,UAAU1B,UAAY,GAAGkC,EAAKY,MAAMzC,QAAUE,EAAOwC,MAAQb,EAAKY,MAAMX,KAAKE,MAAQH,EAAKY,MAAMzC,QAAUE,EAAOyC,MAAQd,EAAKY,MAAMX,KAAKG,MAAQJ,EAAKY,MAAMX,KAAKO,QAG1KtH,KAAKuG,OAAOY,MAAMM,QAAUX,EAAKP,OAAS,OAAS,OACnDvG,KAAKwG,iBAAiBW,MAAMM,SAAwB,QAAd,EAAAX,EAAKe,iBAAS,eAAEC,aAAc,OAAS,OAC7E9H,KAAKyG,iBAAiBU,MAAMM,SAAwB,QAAd,EAAAX,EAAKe,iBAAS,eAAEE,aAAc,OAAS,OAC7E/H,KAAK0G,aAAaS,MAAMM,SAAwB,QAAd,EAAAX,EAAKe,iBAAS,eAAEG,SAAU,OAAS,QAI7EnD,eAAeC,OAAO,wBAAyBc,GE9EzC,MAAOqC,UAAsBtE,YAM/B,cACIC,QACA5D,KAAK6D,UCfF,iJDgBH7D,KAAK2G,MAAQ7E,EAAM8E,cACnB5G,KAAKkI,kBAAoBlI,KAAK+D,cAAc,mBAC5C/D,KAAKmI,sBAAwB,IAAIvI,EAAuBI,KAAKkI,mBACzDE,GAAKA,EAAEpB,KACPoB,IACI,IAAIC,EAAKC,SAASvI,cAAc,MAEhC,OADAsI,EAAGE,YAAY,IAAI3C,GACZyC,KAInB,oBACIrI,KAAKgE,gBAAkB,IAAIC,gBAC3BjE,KAAK2G,MAAM6B,WAAUlG,GAAKtC,KAAKyI,YAAYnG,IAAItC,KAAKgE,gBAAgBpB,QACpE5C,KAAKyI,YAAYzI,KAAK2G,MAAM+B,OAGhC,YAAYpG,GACRtC,KAAKmI,sBAAsBQ,OAAOrG,EAAEsG,eAAe,CAACP,EAAID,KACFC,EAAGrH,SAAS,GAC5D6H,QAAQT,MAIlB,uBACIpI,KAAKgE,gBAAgBU,SEzC7B,ICEYoE,EH2CZjE,eAAeC,OAAO,iBAAkBmD,GIlClC,MAAOc,UAAkBpF,YAK3B,cACIC,QACA5D,KAAK6D,UClBF,mjBDqBP,oBACI7D,KAAKgJ,WAAahJ,KAAK+D,cAAc,UACrC/D,KAAKiJ,iBAAmBjJ,KAAK+D,cAAc,iBAC3C/D,KAAKiJ,iBAAiBC,MAAQC,OAAOC,SAASC,KAAKC,QAAQ,2BAA4B,IAAIA,QAAQ,SAAU,IAC7GtJ,KAAKuJ,eAAiBvJ,KAAK+D,cAAc,eACzC/D,KAAKwJ,UAAYxJ,KAAK+D,cAAc,eACpC/D,KAAKgJ,WAAWE,MAzBxB,SAAeO,GAGX,IAFA,IAAIC,EAAO,GACPC,EAAW,iEACNvI,EAAI,EAAGA,EAsBkB,EAtBNA,IACxBsI,GAAQC,EAASC,OAAOC,KAAKC,MAAMD,KAAKE,SAAWJ,EAASF,SAEhE,OAAOC,EAmBqBM,GAG5B,wBAIA,aAAaC,GACTjK,KAAKuJ,eAAeL,MAAQe,EAGhC,SACIjK,KAAKwJ,UAAUU,UAIvBrF,eAAeC,OAAO,aAAciE,GEtC9B,MAAOoB,UAAuBxG,YAGhC,cACIC,QACA5D,KAAK6D,UJVF,kLIWH7D,KAAKwJ,UAAYxJ,KAAK+D,cAAc,cAGxC,oBACQ,wBAAyBoF,QACzBiB,UAAUC,YAAY3J,IAAI,CACtB4J,UAAW,CACPC,UAAW,CACP,gCAGRC,UAAW,aACZC,MAAKC,IACAA,GAAe,aAAVA,EAAExF,OACPlF,KAAKwJ,UAAUmB,aAAaD,EAAE1D,IAC9BhH,KAAKwJ,UAAUU,aAM/B,yBAKJrF,eAAeC,OAAO,kBAAmBqF,GCnCnC,MAAOS,EACT,YAAmBC,GAAA,KAAAA,cACV,KAAA3F,KAAI,IJFjB,SAAY4D,GACR,qBACA,+BACA,+BACA,uBAJJ,CAAYA,MAAY,KKKlB,MAAOgC,UAA0BnH,YAOnC,cACIC,QACA5D,KAAK6D,UChBF,qeDiBH7D,KAAK+K,KAAO/K,KAAK+D,cAAc,QAC/B/D,KAAKgL,eAAiBhL,KAAK+D,cAAc,oBACzC/D,KAAK2G,MAAQ7E,EAAM8E,cACnB5G,KAAKiL,OAASC,EAAUtE,cAG5B,oBACI5G,KAAKgE,gBAAkB,IAAIC,gBAC3Bd,EAAuBnD,KAAK+K,KAAM,UAAU1I,GAAMrC,KAAKmL,aAAa9I,IAAKrC,KAAKgE,gBAAgBpB,QAC9F5C,KAAK2G,MAAM6B,WAAUlG,GAAKtC,KAAKyI,YAAYnG,IAAItC,KAAKgE,gBAAgBpB,QACpE5C,KAAKyI,YAAYzI,KAAK2G,MAAM+B,OAGhC,YAAYpG,GACJA,EAAE8I,UAAYtC,EAAauC,YAC3BrL,KAAKiL,OAAOA,OAAOK,SAAS,GAAI,UAAU,GAE9CtL,KAAKgL,eAAe7D,MAAMM,QAAUnF,EAAE8I,UAAYtC,EAAayC,OAAS,SAAW,OAGvF,aAAalJ,GACTA,EAAG8B,iBACH,IAAIqH,EAAwB,IAAIC,SAASzL,KAAK+K,MAAMrK,IAAI,gBACxDV,KAAK2G,MAAME,WAAW,IAAI+D,EAAeY,IAG7C,uBACIxL,KAAKgE,gBAAgBU,SAI7BG,eAAeC,OAAO,qBAAsBgG,GE3CtC,MAAOI,EAWT,cACI,IAAIQ,EAAO1L,KAiBXA,KAAKiL,OAAS,IAAI,KAAoB,IAhBtC,MACiB,cAACU,EAAmBC,EAAsBX,GACnD,OAAQW,GACJ,IAAK,QAED,OADAF,EAAKG,YAAc,QACZ,IAAI1B,EACf,IAAK,WAED,OADAuB,EAAKG,YAAc,WACZ,IAAIf,EACf,QAGI,OAFAY,EAAKG,YAAc,OACX,IAAI5D,KAKkC,IAAI,KAAuBK,SAASwD,eAAe,aAzBnG,qBAId,OAHI,MAAQ9L,KAAK2C,WACb3C,KAAK2C,SAAW,IAAIuI,GAEjBlL,KAAK2C,UANT,EAAAA,SAAsB,KCH3B,MAAOoJ,EACT,YAAmBC,GAAA,KAAAA,cACV,KAAA9G,KAAI,GCHX,MAAO+G,EACT,cACS,KAAA/G,KAAI,GCFX,MAAOgH,EACT,cACS,KAAAhH,KAAI,GCEX,MAAOiH,UAAexI,YASxB,cACIC,QACA5D,KAAK6D,UClBF,sVDmBH7D,KAAK2G,MAAQ7E,EAAM8E,cACnB5G,KAAKiL,OAASC,EAAUtE,cACxB5G,KAAK6K,YAAc7K,KAAK+D,cAAc,mBACtC/D,KAAKoM,UAAYpM,KAAK+D,cAAc,WACpC/D,KAAKqM,SAAWrM,KAAK+D,cAAc,UACnC/D,KAAKsM,cAAgBtM,KAAK+D,cAAc,mBAG5C,oBACI/D,KAAKgE,gBAAkB,IAAIC,gBAC3Bd,EAAuBnD,KAAKoM,UAAW,SAAS/J,IAC5CrC,KAAK2G,MAAME,WAAW,IAAIqF,GAC1BK,eAAeC,UAChBxM,KAAKgE,gBAAgBpB,QACxBO,EAAuBnD,KAAKqM,SAAU,SAAShK,IAC3CrC,KAAKiL,OAAOA,OAAOK,SAAS,QAAS,oBACtCtL,KAAKgE,gBAAgBpB,QACxB5C,KAAK2G,MAAM6B,WAAUlG,GAAKtC,KAAKyI,YAAYnG,IAAItC,KAAKgE,gBAAgBpB,QACpE5C,KAAKyI,YAAYzI,KAAK2G,MAAM+B,OAGhC,YAAYpG,GACRtC,KAAK6K,YAAYjG,UAAYtC,EAAEuI,aAAe,GAC9C7K,KAAK6K,YAAY1D,MAAMM,QAAUnF,EAAE0J,YAAc,SAAW,OAC5DhM,KAAKoM,UAAUjF,MAAMM,QAAUnF,EAAE0J,YAAc,SAAW,OAC1DhM,KAAKqM,SAASlF,MAAMM,QAAUnF,EAAE0J,YAAc,OAAS,SAG3D,uBACIhM,KAAKgE,gBAAgBU,SAI7BG,eAAeC,OAAO,UAAWqH,GE7C7B,kBAAmB/B,WACnBjB,OAAO/G,iBAAiB,QAAQqK,UAC5BrC,UAAUsC,cAActB,SAAS,WAAWX,MAAKkC,QAC9CC,OAAMC,IACLpK,QAAQqK,IAAI,2BAA4BD,SA8CpDJ,iBACI,IAAIM,EAAY7B,EAAUtE,cAC1BmG,EAAU9B,OAAO+B,MAEjB,IAAIrG,EAAQ7E,EAAM8E,cAClBD,EAAM6B,WAAUE,IACRA,EAAMuE,WAAsC,SAAzBF,EAAUlB,aAC7BlF,EAAME,WAAW,IAAIoF,GACrBc,EAAU9B,OAAOK,SAAS,QAAS,mBAE9B5C,EAAMwE,cAAyC,YAAzBH,EAAUlB,cACrClF,EAAME,WAAW,IAAIoF,GACrBc,EAAU9B,OAAOK,SAAS,WAAY,6BAI9C,IAAIU,QAzDRS,iBACI,MAAMU,EAAoB,sBAC1B,IAAIC,EAAmB,IAAIC,gBAAgBlE,OAAOC,SAASkE,KAAKhE,QAAQ,KAAM,KAC1EiE,EAAeH,EAAiB1M,IAAI,YACxC,GAAI6M,EAAc,CACdC,QAAQC,aAAa,KAAM,KAAM,KACjC,IAAIC,QAAYC,MAAM,oDAAoDJ,KACtEK,QAAkBF,EAAIG,OAC1B,IAAKH,EAAII,GACL,MAAM,IAAIC,MAAM,uCAAuCL,EAAIM,UAE/D,IACIC,EAAqB,CACrBA,MAAOV,EACPW,KAHQ,IAAIC,KAAuD,IAA/C3J,SAAS4I,EAAiB1M,IAAI,eAIlD0N,MAAOR,EAAUQ,MACjBvL,IAAK+K,EAAU/K,KAGnB,GADA0J,eAAe8B,QAAQlB,EAAmBmB,KAAKC,UAAUN,IACrD,wBAAyB9E,OAAQ,CACjC,IAAIqF,QAAapE,UAAUC,YAAYoE,OAAO,CAC1CnE,UAAW,CACPtD,GAAI4G,EAAU/K,IACd6L,SAAU,uCAGZtE,UAAUC,YAAY1D,MAAM6H,GAEtC,OAAOP,EACJ,CACH,IAAIU,EAAepC,eAAeqC,QAAQzB,GAC1C,GAAI,MAAQwB,EAAc,CACtB,IAAIE,EAAsBP,KAAKQ,MAAMH,GACrC,GAAIE,EAAOX,KAAO,IAAIC,KAClB,OAAOU,GAInB,OAAO,KAmBiBE,GACxBpI,EAAME,WAAW,IAAIkF,EAAWC,IAEpCgB,GAAMJ,OAAMpK,GAAOC,QAAQC,MAAMF,OC5E7BwM,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CAGjDG,QAAS,IAOV,OAHAE,EAAoBL,GAAUI,EAAQA,EAAOD,QAASJ,GAG/CK,EAAOD,QAIfJ,EAAoBO,EAAID,E3BzBpB5P,EAAW,GACfsP,EAAoBQ,EAAI,SAASC,EAAQC,EAAUC,EAAIC,GACtD,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAAS3O,EAAI,EAAGA,EAAIzB,EAAS8J,OAAQrI,IAAK,CACrCuO,EAAWhQ,EAASyB,GAAG,GACvBwO,EAAKjQ,EAASyB,GAAG,GACjByO,EAAWlQ,EAASyB,GAAG,GAE3B,IAJA,IAGI4O,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAASlG,OAAQwG,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAaK,OAAOC,KAAKlB,EAAoBQ,GAAGW,OAAM,SAASzP,GAAO,OAAOsO,EAAoBQ,EAAE9O,GAAKgP,EAASM,OAC3JN,EAAS5M,OAAOkN,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG1CG,IACFrQ,EAASoD,OAAO3B,IAAK,GACrBsO,EAASE,KAGX,OAAOF,EAxBNG,EAAWA,GAAY,EACvB,IAAI,IAAIzO,EAAIzB,EAAS8J,OAAQrI,EAAI,GAAKzB,EAASyB,EAAI,GAAG,GAAKyO,EAAUzO,IAAKzB,EAASyB,GAAKzB,EAASyB,EAAI,GACrGzB,EAASyB,GAAK,CAACuO,EAAUC,EAAIC,I4BJ/BZ,EAAoBoB,EAAI,SAASf,GAChC,IAAIgB,EAAShB,GAAUA,EAAOiB,WAC7B,WAAa,OAAOjB,EAAgB,SACpC,WAAa,OAAOA,GAErB,OADAL,EAAoBxO,EAAE6P,EAAQ,CAAEE,EAAGF,IAC5BA,GCLRrB,EAAoBxO,EAAI,SAAS4O,EAASoB,GACzC,IAAI,IAAI9P,KAAO8P,EACXxB,EAAoByB,EAAED,EAAY9P,KAASsO,EAAoByB,EAAErB,EAAS1O,IAC5EuP,OAAOS,eAAetB,EAAS1O,EAAK,CAAEiQ,YAAY,EAAMlQ,IAAK+P,EAAW9P,MCH3EsO,EAAoB4B,EAAI,SAASC,GAEhC,MAAO,kCCHR7B,EAAoB7G,EAAI,WACvB,GAA0B,iBAAf2I,WAAyB,OAAOA,WAC3C,IACC,OAAO/Q,MAAQ,IAAIgR,SAAS,cAAb,GACd,MAAO9M,GACR,GAAsB,iBAAXiF,OAAqB,OAAOA,QALjB,GCAxB8F,EAAoByB,EAAI,SAASO,EAAKC,GAAQ,OAAOhB,OAAOiB,UAAUC,eAAe7O,KAAK0O,EAAKC,ICA/FjC,EAAoBoC,EAAI,W,WCAxBpC,EAAoBqC,EAAIhJ,SAASiJ,SAAW7F,KAAKtC,SAASC,KAK1D,IAAImI,EAAkB,CACrBC,IAAK,GAaNxC,EAAoBQ,EAAEQ,EAAI,SAASa,GAAW,OAAoC,IAA7BU,EAAgBV,IAGrE,IAAIY,EAAuB,SAASC,EAA4BzQ,GAC/D,IAKIgO,EAAU4B,EALVnB,EAAWzO,EAAK,GAChB0Q,EAAc1Q,EAAK,GACnB2Q,EAAU3Q,EAAK,GAGIE,EAAI,EAC3B,IAAI8N,KAAY0C,EACZ3C,EAAoByB,EAAEkB,EAAa1C,KACrCD,EAAoBO,EAAEN,GAAY0C,EAAY1C,IAGhD,GAAG2C,EAAS,IAAInC,EAASmC,EAAQ5C,GAEjC,IADG0C,GAA4BA,EAA2BzQ,GACrDE,EAAIuO,EAASlG,OAAQrI,IACzB0P,EAAUnB,EAASvO,GAChB6N,EAAoByB,EAAEc,EAAiBV,IAAYU,EAAgBV,IACrEU,EAAgBV,GAAS,KAE1BU,EAAgB7B,EAASvO,IAAM,EAEhC,OAAO6N,EAAoBQ,EAAEC,IAG1BoC,EAAqBpG,KAAyB,mBAAIA,KAAyB,oBAAK,GACpFoG,EAAmBC,QAAQL,EAAqBM,KAAK,KAAM,IAC3DF,EAAmBhP,KAAO4O,EAAqBM,KAAK,KAAMF,EAAmBhP,KAAKkP,KAAKF,I,GC7CvF,IAAIG,EAAsBhD,EAAoBQ,OAAEL,EAAW,CAAC,MAAM,WAAa,OAAOH,EAAoB,SAC1GgD,EAAsBhD,EAAoBQ,EAAEwC,G","file":"7d566489c060a6419ae2.bundle.js","sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tresult = fn();\n\t\t}\n\t}\n\treturn result;\n};","export class ArrayToElementRenderer<T, E extends Element, K>{\n    private keyToElement: Map<K, E>;\n    private elementToKey: WeakMap<E, K>;\n    \n    constructor(private listElement: HTMLElement,\n        private keySelector: (x: T) => K,\n        private createElement: (x: T) => E) {\n        this.keyToElement = new Map<K, E>();\n        this.elementToKey = new WeakMap<E, K>();\n    }\n\n    update(list: T[], updateElement: (x: E, data: T) => void) {\n        let keyCache = new Map<T, K>();\n        let getKey = (d: T) => keyCache.get(d) || (() => {\n            let key = this.keySelector(d);\n            keyCache.set(d, key);\n            return key;\n        })();\n        for (let x of Array.from(this.listElement.children)) {\n            let el: E = <E>x;\n            let data = list.find(i => this.elementToKey.get(el) == getKey(i));\n            if (data) {\n                updateElement(<E>el, data);\n            }\n            else {\n                this.listElement.removeChild(el);\n            }\n        }\n        let before: Element = null;\n        let nextKeyToElement = new Map<K, E>();\n        for (let t of list) {\n            let key = getKey(t);\n            let childElement: E = this.keyToElement.get(key);\n            if (!childElement) {\n                childElement = this.createElement(t);\n                updateElement(childElement, t);\n                this.elementToKey.set(childElement, key);\n            }\n            nextKeyToElement.set(key, childElement);\n            if (null == before && childElement != this.listElement.firstElementChild) {\n                this.listElement.prepend(childElement);\n            }\n            else if (null != before && before.nextElementSibling != childElement) {\n                before.insertAdjacentElement(\"afterend\", childElement);\n            }\n            before = childElement;\n        }\n        this.keyToElement = nextKeyToElement;\n    }\n\n}","import { Action } from \"./requests/Action\";\nimport { State } from \"./state\";\n\ninterface Subscription<State> {\n    call(a: State): void;\n}\n\nexport class Store {\n    private static instance: Store = null;\n    private worker: Worker;\n    private subscriptions: Subscription<State>[];\n    private _state: State = null;\n\n    get state() {\n        return this._state;\n    }\n\n    static getInstance() {\n        if (null == this.instance) {\n            this.instance = new Store();\n        }\n        return this.instance;\n    }\n\n    constructor() {\n        this.subscriptions = [];\n        this.worker = new Worker(new URL(\"./worker\", import.meta.url));\n        this.worker.addEventListener(\"message\", ev => {\n            this._state = ev.data;\n            for (let s of this.subscriptions) {\n                try {\n                    s.call(this._state);\n                }\n                catch (err) {\n                    console.error(`Error while updating`, err);\n                }\n\n            }\n        });\n    }\n\n    subscribe(call: (a: State) => void, signal?: AbortSignal) {\n        let sub = { call };\n        this.subscriptions.push(sub);\n        if (signal) {\n            signal.addEventListener(\"abort\", () => {\n                this.subscriptions.splice(this.subscriptions.indexOf(sub), 1);\n            });\n        }\n    }\n\n    postAction(action: Action) {\n        this.worker.postMessage(action);\n    }\n}","export function abortableEventListener<TCallbackFnResult,\n    TEvent,\n    TCallbackFn extends (this: THTMLElement, event: TEvent extends keyof HTMLElementEventMap ? HTMLElementEventMap[TEvent] : any) => TCallbackFnResult,\n    TAddEventListener extends (eventName: TEvent, listener: TCallbackFn) => void,\n    THTMLElement extends { addEventListener: TAddEventListener, removeEventListener: TAddEventListener }>(element: THTMLElement, event: TEvent, listenerFn: TCallbackFn, signal: AbortSignal): void {\n    element.addEventListener(event, listenerFn);\n    signal.addEventListener(\"abort\", () => {\n        element.removeEventListener(event, listenerFn);\n    });\n}","import { abortableEventListener } from \"../../abortable-event-listener\";\nimport template from \"./OddsButton.html\";\nimport \"./OddsButton.scss\";\n\nexport const ChoiceAttribute = \"choice\";\nexport const DisplayAttribute = \"display\";\n\nexport class OddsButton extends HTMLElement {\n    private abortController: AbortController;\n    private btn: HTMLButtonElement;\n\n    constructor() {\n        super();\n        this.innerHTML = template;\n        this.btn = this.querySelector(\"button\");\n    }\n\n    connectedCallback() {\n        this.abortController = new AbortController();\n        abortableEventListener(this.btn, \"click\", e => {\n            e.preventDefault();\n            this.dispatchEvent(new CustomEvent(\"oddsclicked\", { bubbles: true, detail: parseInt(this.getAttribute(ChoiceAttribute)) }));\n        }, this.abortController.signal);\n    }\n\n    disconnectedCallback() {\n        this.abortController.abort();\n    }\n\n    attributeChangedCallback() {\n        this.updateAttributes();\n    }\n\n    private updateAttributes() {\n        this.btn.innerText = this.getAttribute(DisplayAttribute);\n    }\n\n    static get observedAttributes() {\n        return [ChoiceAttribute, DisplayAttribute];\n    }\n}\n\ncustomElements.define(\"odds-button\", OddsButton);\n","// Module\nvar code = \"<button type=\\\"button\\\" class=\\\"odds-button\\\"/>\";\n// Exports\nexport default code;","import { Choice } from \"../../api/models\";\nimport { Action as Action } from \"./Action\";\nimport { ActionType as ActionType } from \"./ActionType\";\n\nexport class CreateBetAction implements Action {\n    constructor(public oddsId: number, public choice: Choice) { }\n    readonly type = ActionType.CreateBet;\n}\n\n","export interface Profile {\n    displayName: string;\n    userId: string;\n}\n\nexport interface Odds {\n    id: number;\n    gameId: number;\n    team1Odds: number;\n    team2Odds: number;\n    drawOdds: number | null;\n}\n\nexport interface GameResult {\n    team1Goals: number;\n    team2Goals: number;\n}\n\nexport interface Game {\n    id: number;\n    team1: string;\n    team2: string;\n    time: string;\n    result: GameResult;\n    myBet: MyBet;\n}\n\nexport interface MyBet {\n    odds: Odds;\n    choice: Choice;\n}\n\nexport interface Bet {\n    id: number;\n    userId: string;\n    userDisplayName: string;\n    timePlaced: string;\n    choice: Choice;\n    odds: number;\n}\n\nexport enum Choice {\n    Team1 = 0,\n    Team2 = 1,\n    Draw = 2\n}","import { UpcomingGame } from \"../../models/UpcomingGame\";\nimport template from \"./UpcomingGameDisplay.html\";\nimport \"./UpcomingGameDisplay.scss\";\nimport \"../OddsButton/OddsButton\";\nimport { DisplayAttribute, OddsButton } from \"../OddsButton/OddsButton\";\nimport { abortableEventListener } from \"../../abortable-event-listener\";\nimport { Store } from \"../../state/store\";\nimport { CreateBetAction } from \"../../state/requests/CreateBetAction\";\nimport { Choice } from \"../../api/models\";\n\nlet i18nFormat = new Intl.DateTimeFormat([\"de-AT\"], { weekday: \"short\", day: \"2-digit\", month: \"2-digit\", hour: \"2-digit\", minute: \"2-digit\" });\n\nexport class UpcomingGameDisplay extends HTMLElement {\n    private team1Label: HTMLSpanElement;\n    private team2Label: HTMLSpanElement;\n    private team1Odds: OddsButton;\n    private drawOdds: OddsButton;\n    private team2Odds: OddsButton;\n    private oddsForm: HTMLFormElement;\n    private timeDisplay: HTMLSpanElement;\n    private abortController: AbortController;\n    private game: UpcomingGame;\n    private store: Store;\n    private myBetContainer: HTMLDivElement;\n    private myBetTeam: HTMLSpanElement;\n    private myBetOdds: HTMLSpanElement;\n    private saving: HTMLDivElement;\n    private oddsChangedError: HTMLDivElement;\n    private gameStartedError: HTMLDivElement;\n    private unknownError: HTMLDivElement;\n\n    constructor() {\n        super();\n        this.innerHTML = template;\n        this.team1Label = this.querySelector(`[data-ref=\"team1\"]`);\n        this.team2Label = this.querySelector(`[data-ref=\"team2\"]`);\n        this.team1Odds = this.querySelector(`[data-ref=\"team1-odds\"]`);\n        this.drawOdds = this.querySelector(`[data-ref=\"draw-odds\"]`);\n        this.team2Odds = this.querySelector(`[data-ref=\"team2-odds\"]`);\n        this.oddsForm = this.querySelector(`[data-ref=\"odds-form\"]`);\n        this.timeDisplay = this.querySelector(`[data-ref=\"time\"]`);\n        this.myBetContainer = this.querySelector(`[data-ref=\"my-bet\"]`);\n        this.myBetTeam = this.querySelector(`[data-ref=\"my-bet-team\"]`);\n        this.myBetOdds = this.querySelector(`[data-ref=\"my-bet-odds\"]`);\n        this.saving = this.querySelector(`[data-ref=\"saving\"]`);\n        this.oddsChangedError = this.querySelector(`[data-ref=\"odds-changed-error\"]`);\n        this.gameStartedError = this.querySelector(`[data-ref=\"game-started-error\"]`);\n        this.unknownError = this.querySelector(`[data-ref=\"save-error\"]`)\n        this.store = Store.getInstance();\n    }\n\n    connectedCallback() {\n        this.abortController = new AbortController();\n        abortableEventListener(this.oddsForm, \"oddsclicked\", (ev: CustomEvent) => {\n            this.store.postAction(new CreateBetAction(this.game.odds.id, ev.detail));\n        }, this.abortController.signal);\n    }\n\n    disconnectedCallback() {\n        this.abortController.abort();\n    }\n\n    setGame(game: UpcomingGame) {\n        this.game = game;\n        this.team1Label.innerText = game.team1;\n        this.team2Label.innerText = game.team2;\n        this.oddsForm.style.visibility = game.odds ? \"visible\" : \"hidden\";\n        if (game.odds) {\n            this.team1Odds.setAttribute(DisplayAttribute, `${game.odds.team1}`);\n            this.drawOdds.setAttribute(DisplayAttribute, `${game.odds.draw}`);\n            this.team2Odds.setAttribute(DisplayAttribute, `${game.odds.team2}`);\n            this.timeDisplay.innerText = i18nFormat.format(game.time);\n        }\n        this.myBetContainer.style.display = game.myBet && !game.saving ? \"flex\" : \"none\";\n        if (game.myBet) {\n            this.myBetTeam.innerText = game.myBet.choice == Choice.Team1 ? game.team1 : game.myBet.choice == Choice.Team2 ? game.team2 : \"Unentschieden\";\n            this.myBetOdds.innerText = `${game.myBet.choice == Choice.Team1 ? game.myBet.odds.team1 : game.myBet.choice == Choice.Team2 ? game.myBet.odds.team2 : game.myBet.odds.draw}`;\n\n        }\n        this.saving.style.display = game.saving ? \"flex\" : \"none\";\n        this.oddsChangedError.style.display = game.saveError?.oddsChanged ? \"flex\" : \"none\";\n        this.gameStartedError.style.display = game.saveError?.gameStarted ? \"flex\" : \"none\";\n        this.unknownError.style.display = game.saveError?.unknown ? \"flex\" : \"none\";\n    }\n}\n\ncustomElements.define(\"upcoming-game-display\", UpcomingGameDisplay);\n","// Module\nvar code = \"<h3> <span data-ref=\\\"team1\\\"></span> - <span data-ref=\\\"team2\\\"></span> </h3> <span data-ref=\\\"time\\\"></span> <form data-ref=\\\"odds-form\\\" class=\\\"odds-form\\\"> <odds-button choice=\\\"0\\\" data-ref=\\\"team1-odds\\\"></odds-button> <odds-button choice=\\\"2\\\" data-ref=\\\"draw-odds\\\"></odds-button> <odds-button choice=\\\"1\\\" data-ref=\\\"team2-odds\\\"></odds-button> </form> <div data-ref=\\\"my-bet\\\" class=\\\"status-msg my-bet\\\"> <span class=\\\"material-icons\\\" title=\\\"Tipp abgegeben\\\"> done </span> <span> Dein Tipp <strong> <span data-ref=\\\"my-bet-team\\\"></span> </strong> für <strong> <span data-ref=\\\"my-bet-odds\\\"></span></strong>. </span> </div> <div data-ref=\\\"saving\\\" class=\\\"status-msg saving\\\"> <span class=\\\"material-icons\\\" title=\\\"Tipp wird gepeichert.\\\"> donut_large </span> Dein Tipp wird gespeichert. </div> <div data-ref=\\\"odds-changed-error\\\" class=\\\"status-msg warning\\\"> <span class=\\\"material-icons\\\" title=\\\"Tipp nicht gespeichert: Quoten geändert\\\"> warning </span> Dein Tipp wurde nicht gespeichert, weil sich die Quoten geändert haben. </div> <div data-ref=\\\"game-started-error\\\" class=\\\"status-msg error\\\"> <span class=\\\"material-icons\\\" title=\\\"Spiel hat bereits begonnen\\\"> error </span> Dein Tipp wurde nicht gespeichert, weil das Spiel bereits begonnen hat. </div> <div data-ref=\\\"save-error\\\" class=\\\"status-msg error\\\"> <span class=\\\"material-icons\\\" title=\\\"Tipp konnte nicht gespeichert werden\\\"> error </span> Beim Speichern ist ein Fehler aufgetreten. </div>\";\n// Exports\nexport default code;","import { ArrayToElementRenderer } from \"../../ArrayToElementRenderer\";\nimport { UpcomingGame } from \"../../models/UpcomingGame\";\nimport { State } from \"../../state/state\";\nimport { Store } from \"../../state/store\";\nimport { UpcomingGameDisplay } from \"../UpcomingGameDisplay/UpcomingGameDisplay\";\nimport template from \"./HomeComponent.html\";\nimport \"./HomeComponent.scss\";\n\nexport class HomeComponent extends HTMLElement {\n    private store: Store;\n    private abortController: AbortController;\n    private upcomingGamesList: HTMLOListElement;\n    private upcomingGamesRenderer: ArrayToElementRenderer<UpcomingGame, HTMLLIElement, number>;\n\n    constructor() {\n        super();\n        this.innerHTML = template;\n        this.store = Store.getInstance();\n        this.upcomingGamesList = this.querySelector(\"#upcoming-games\");\n        this.upcomingGamesRenderer = new ArrayToElementRenderer(this.upcomingGamesList,\n            g => g.id,\n            g => {\n                let li = document.createElement(\"li\");\n                li.appendChild(new UpcomingGameDisplay());\n                return li;\n            });\n    }\n\n    connectedCallback() {\n        this.abortController = new AbortController();\n        this.store.subscribe(s => this.updateState(s), this.abortController.signal);\n        this.updateState(this.store.state);\n    }\n\n    updateState(s: State) {\n        this.upcomingGamesRenderer.update(s.upcomingGames, (li, g) => {\n            let e: UpcomingGameDisplay = <UpcomingGameDisplay>li.children[0];\n            e.setGame(g);\n        });\n    }\n\n    disconnectedCallback() {\n        this.abortController.abort();\n    }\n}\n\ncustomElements.define(\"home-component\", HomeComponent);\n","// Module\nvar code = \"<div class=\\\"container\\\"> <section class=\\\"section\\\"> <h2> Nächste Spiele </h2> <ol id=\\\"upcoming-games\\\" class=\\\"gameslist\\\"> </ol> </section> </div>\";\n// Exports\nexport default code;","// Module\nvar code = \"<div class=\\\"container\\\"> <section class=\\\"section\\\"> <h2> Login </h2> <p>Du musst dich zuerst anmelden bevor du fortfahren kannst.</p> <login-form></login-form> </section> </div>\";\n// Exports\nexport default code;","import { AccessToken } from \"../AccessToken\";\nimport { UpcomingGame } from \"../models/UpcomingGame\";\n\nexport enum RequestState {\n    Unset,\n    InProgress,\n    Successful,\n    Failed,\n}\n\nexport interface State {\n    goToLogin: boolean;\n    upcomingGames: UpcomingGame[];\n    accessToken: AccessToken;\n    goToRegister: boolean;\n    displayName: string;\n    userId: string;\n    register: RequestState;\n}\n","import template from \"./LoginForm.html\";\nimport \"./LoginForm.scss\";\n\nfunction nonce(length: number) {\n    var text = \"\";\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    for (var i = 0; i < length; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return text;\n}\n\nexport class LoginForm extends HTMLElement {\n    private nonceInput: HTMLInputElement;\n    private redirectUriInput: HTMLInputElement;\n    private loginHintInput: HTMLInputElement;\n    private loginForm: HTMLFormElement;\n    constructor() {\n        super();\n        this.innerHTML = template;\n    }\n\n    connectedCallback() {\n        this.nonceInput = this.querySelector(\"#nonce\");\n        this.redirectUriInput = this.querySelector(\"#redirect_uri\");\n        this.redirectUriInput.value = window.location.href.replace(/\\/(login)|(\\?.+)|(\\#.+)/g, \"\").replace(/(\\/$)/g, \"\");\n        this.loginHintInput = this.querySelector(\"#login_hint\");\n        this.loginForm = this.querySelector(\"#login_form\");\n        this.nonceInput.value = nonce(8);\n    }\n\n    disconnectedCallback() {\n\n    }\n\n    setLoginHint(hint: string) {\n        this.loginHintInput.value = hint;\n    }\n\n    submit() {\n        this.loginForm.submit();\n    }\n}\n\ncustomElements.define(\"login-form\", LoginForm);\n","// Module\nvar code = \"<form method=\\\"GET\\\" action=\\\"https://accounts.google.com/o/oauth2/v2/auth\\\" id=\\\"login_form\\\"> <input type=\\\"hidden\\\" name=\\\"client_id\\\" id=\\\"client_id\\\" value=\\\"1074789941765-gfvvc65dl37u9upl9opgo3q1f7hmqh5n.apps.googleusercontent.com\\\"> <input type=\\\"hidden\\\" name=\\\"redirect_uri\\\" id=\\\"redirect_uri\\\"> <input type=\\\"hidden\\\" name=\\\"response_type\\\" value=\\\"token id_token\\\"> <input type=\\\"hidden\\\" name=\\\"login_hint\\\" id=\\\"login_hint\\\"> <input type=\\\"hidden\\\" name=\\\"nonce\\\" id=\\\"nonce\\\"> <input type=\\\"hidden\\\" name=\\\"scope\\\" value=\\\"openid\\\"> <button type=\\\"submit\\\">Login über Google</button> </form>\";\n// Exports\nexport default code;","import template from \"./LoginComponent.html\";\nimport \"./LoginComponent.scss\";\nimport \"../LoginForm/LoginForm\";\nimport { LoginForm } from \"../LoginForm/LoginForm\";\n\n\nexport class LoginComponent extends HTMLElement {\n    private loginForm: LoginForm;\n\n    constructor() {\n        super();\n        this.innerHTML = template;\n        this.loginForm = this.querySelector(\"login-form\");\n    }\n\n    connectedCallback() {\n        if (\"FederatedCredential\" in window) {\n            navigator.credentials.get({\n                federated: {\n                    providers: [\n                        \"https://accounts.google.com\"\n                    ]\n                },\n                mediation: \"optional\"\n            }).then(c => {\n                if (c && c.type == \"federated\") {\n                    this.loginForm.setLoginHint(c.id);\n                    this.loginForm.submit();\n                }\n            });\n        }\n    }\n\n    disconnectedCallback() {\n\n    }\n}\n\ncustomElements.define(\"login-component\", LoginComponent);","import { Action as Action } from \"./Action\";\nimport { ActionType as ActionType } from \"./ActionType\";\n\nexport class RegisterAction implements Action {\n    constructor(public displayName: string) { }\n    readonly type = ActionType.Register;\n}\n\n","import { abortableEventListener } from \"../../abortable-event-listener\";\nimport { AppRouter } from \"../../app-router\";\nimport { RegisterAction } from \"../../state/requests/RegisterAction\";\nimport { RequestState, State } from \"../../state/state\";\nimport { Store } from \"../../state/store\";\nimport template from \"./RegisterComponent.html\";\nimport \"./RegisterComponent.scss\";\n\nexport class RegisterComponent extends HTMLElement {\n    private form: HTMLFormElement;\n    private abortController: AbortController;\n    private store: Store;\n    private registerFailed: HTMLSpanElement;\n    private router: AppRouter;\n\n    constructor() {\n        super();\n        this.innerHTML = template;\n        this.form = this.querySelector(\"form\");\n        this.registerFailed = this.querySelector(\"#register-failed\");\n        this.store = Store.getInstance();\n        this.router = AppRouter.getInstance();\n    }\n\n    connectedCallback() {\n        this.abortController = new AbortController();\n        abortableEventListener(this.form, \"submit\", ev => this.onFormSubmit(ev), this.abortController.signal);\n        this.store.subscribe(s => this.updateState(s), this.abortController.signal);\n        this.updateState(this.store.state);\n    }\n\n    updateState(s: State) {\n        if (s.register == RequestState.Successful) {\n            this.router.router.navigate(\"\", \"wettma\", true);\n        }\n        this.registerFailed.style.display = s.register == RequestState.Failed ? \"inline\" : \"none\";\n    }\n\n    onFormSubmit(ev: Event) {\n        ev.preventDefault();\n        let name: string = <string>(new FormData(this.form).get(\"display-name\"));\n        this.store.postAction(new RegisterAction(name));\n    }\n\n    disconnectedCallback() {\n        this.abortController.abort();\n    }\n}\n\ncustomElements.define(\"register-component\", RegisterComponent);\n","// Module\nvar code = \"<div class=\\\"container\\\"> <section class=\\\"section\\\"> <h2> Anzeigenamen </h2> <p>Lege einen Anzeigenamen fest. Dieser wird <strong>für alle ersichtlich</strong> im Scoreboard angezeigt.</p> <form> <label for=\\\"display-name\\\">Anzeigename</label> <input type=\\\"text\\\" id=\\\"display-name\\\" name=\\\"display-name\\\" maxlength=\\\"15\\\" required=\\\"required\\\"> <button type=\\\"submit\\\">Speichern</button> </form> <span style=\\\"display:none\\\" id=\\\"register-failed\\\">Registrierung fehlgeschlagen</span> </section> </div>\";\n// Exports\nexport default code;","import { ContainerRouteRenderer, Router } from \"route-it\";\nimport { AsyncRouteResolver } from \"route-it/dist/router\";\nimport { HomeComponent } from \"./components/HomeComponent/HomeComponent\";\nimport { LoginComponent } from \"./components/LoginComponent/LoginComponent\";\nimport { RegisterComponent } from \"./components/RegisterComponent/RegisterComponent\";\n\nexport class AppRouter {\n    activeRoute: string;\n    static instance: AppRouter = null;\n    router: Router<HTMLElement>;\n    static getInstance() {\n        if (null == this.instance) {\n            this.instance = new AppRouter();\n        }\n        return this.instance;\n    }\n\n    constructor() {\n        let self = this;\n        class AppRouteResolver implements AsyncRouteResolver<HTMLElement> {\n            async resolve(lastRoute: string, currentRoute: string, router: Router<any>): Promise<false | HTMLElement> {\n                switch (currentRoute) {\n                    case \"login\":\n                        self.activeRoute = \"login\";\n                        return new LoginComponent();\n                    case \"register\":\n                        self.activeRoute = \"register\";\n                        return new RegisterComponent();\n                    default:\n                        self.activeRoute = \"home\";\n                        let c = new HomeComponent();\n                        return c;\n                }\n            }\n        }\n        this.router = new Router<HTMLElement>(new AppRouteResolver(), new ContainerRouteRenderer(document.getElementById(\"content\")));\n    }\n}\n","import { AccessToken } from \"../../AccessToken\";\nimport { Action as Action } from \"./Action\";\nimport { ActionType as ActionType } from \"./ActionType\";\n\n\nexport class Initialize implements Action {\n    constructor(public accessToken: AccessToken) { }\n    readonly type = ActionType.Initialize;\n}\n","import { Action as Action } from \"./Action\";\nimport { ActionType as ActionType } from \"./ActionType\";\n\n\nexport class LoginPageOpened implements Action {\n    constructor() { }\n    readonly type = ActionType.LoginPageOpened;\n}\n","import { Action as Action } from \"./Action\";\nimport { ActionType as ActionType } from \"./ActionType\";\n\n\nexport class LogoutAction implements Action {\n    constructor() { }\n    readonly type = ActionType.Logout;\n}\n","import { abortableEventListener } from \"../../abortable-event-listener\";\nimport { AppRouter } from \"../../app-router\";\nimport { LogoutAction } from \"../../state/requests/LogoutAction\";\nimport { State } from \"../../state/state\";\nimport { Store } from \"../../state/store\";\nimport template from \"./AppBar.html\";\nimport \"./AppBar.scss\";\n\nexport class AppBar extends HTMLElement {\n    private store: Store;\n    private abortController: AbortController;\n    private displayName: HTMLSpanElement;\n    private logoutBtn: HTMLButtonElement;\n    private userContainer: HTMLDivElement;\n    private loginBtn: HTMLButtonElement;\n    private router: AppRouter;\n\n    constructor() {\n        super();\n        this.innerHTML = template;\n        this.store = Store.getInstance();\n        this.router = AppRouter.getInstance();\n        this.displayName = this.querySelector(\"#logged-in-user\");\n        this.logoutBtn = this.querySelector(\"#logout\");\n        this.loginBtn = this.querySelector(\"#login\");\n        this.userContainer = this.querySelector(\"#user-container\");\n    }\n\n    connectedCallback() {\n        this.abortController = new AbortController();\n        abortableEventListener(this.logoutBtn, \"click\", ev => {\n            this.store.postAction(new LogoutAction());\n            sessionStorage.clear();\n        }, this.abortController.signal);\n        abortableEventListener(this.loginBtn, \"click\", ev => {\n            this.router.router.navigate(\"login\", \"wettma - Login\");\n        }, this.abortController.signal);\n        this.store.subscribe(s => this.updateState(s), this.abortController.signal);\n        this.updateState(this.store.state);\n    }\n\n    updateState(s:State) {\n        this.displayName.innerText = s.displayName || \"\";\n        this.displayName.style.display = s.accessToken ? \"inline\" : \"none\";\n        this.logoutBtn.style.display = s.accessToken ? \"inline\" : \"none\";\n        this.loginBtn.style.display = s.accessToken ? \"none\" : \"inline\";\n    }\n\n    disconnectedCallback() {\n        this.abortController.abort();\n    }\n}\n\ncustomElements.define(\"app-bar\", AppBar);\n","// Module\nvar code = \"<div class=\\\"app-bar__container\\\"> <nav class=\\\"app-bar\\\"> <h1> <span class=\\\"material-icons\\\"> sports_soccer </span> wettma</h1> <div class=\\\"user-container\\\" id=\\\"user-container\\\"> <span id=\\\"logged-in-user\\\"></span> <button id=\\\"logout\\\" style=\\\"display:none\\\">Logout</button> <button id=\\\"login\\\" style=\\\"display:none\\\">Login</button> </div> </nav> </div>\";\n// Exports\nexport default code;","import { AccessToken } from \"./AccessToken\";\nimport { AppRouter } from \"./app-router\";\nimport { Initialize } from \"./state/requests/Initialize\";\nimport { LoginPageOpened } from \"./state/requests/LoginPageOpened\";\nimport { Store } from \"./state/store\";\nimport \"./styles.scss\";\nimport \"./components/AppBar/AppBar\";\n\nif (\"serviceWorker\" in navigator) {\n    window.addEventListener(\"load\", async () => {\n        navigator.serviceWorker.register(\"./sw.js\").then(registration => {\n        }).catch(registrationError => {\n            console.log('SW registration failed: ', registrationError);\n        });\n    });\n}\n\nasync function getAccessToken() {\n    const sessionStorageKey = \"wettma-webapp-token\";\n    let searchParameters = new URLSearchParams(window.location.hash.replace(/^#/, \"\"))\n    let tokenFromUrl = searchParameters.get(\"id_token\");\n    if (tokenFromUrl) {\n        history.replaceState(null, null, \" \");\n        let res = await fetch(`https://oauth2.googleapis.com/tokeninfo?id_token=${tokenFromUrl}`);\n        let tokenInfo = await res.json();\n        if (!res.ok) {\n            throw new Error(`access token validation resulted in ${res.status}`);\n        }\n        let exp = +(new Date) + parseInt(searchParameters.get(\"expires_in\")) * 1000;\n        let token: AccessToken = {\n            token: tokenFromUrl,\n            exp: exp,\n            scope: tokenInfo.scope,\n            sub: tokenInfo.sub\n        };\n        sessionStorage.setItem(sessionStorageKey, JSON.stringify(token));\n        if (\"FederatedCredential\" in window) {\n            var cred = await navigator.credentials.create({\n                federated: {\n                    id: tokenInfo.sub,\n                    provider: \"https://accounts.google.com\"\n                }\n            });\n            await navigator.credentials.store(cred);\n        }\n        return token;\n    } else {\n        let sessionToken = sessionStorage.getItem(sessionStorageKey);\n        if (null != sessionToken) {\n            let parsed: AccessToken = JSON.parse(sessionToken);\n            if (parsed.exp > +new Date()) {\n                return parsed;\n            }\n        }\n    }\n    return null;\n}\n\nasync function run() {\n    let appRouter = AppRouter.getInstance();\n    appRouter.router.run();\n\n    let store = Store.getInstance();\n    store.subscribe(state => {\n        if (state.goToLogin && appRouter.activeRoute != \"login\") {\n            store.postAction(new LoginPageOpened());\n            appRouter.router.navigate(\"login\", \"wettma - Login\");\n        }\n        else if (state.goToRegister && appRouter.activeRoute != \"register\") {\n            store.postAction(new LoginPageOpened());\n            appRouter.router.navigate(\"register\", \"wettma - Registrieren\");\n        }\n    })\n\n    let accessToken = await getAccessToken();\n    store.postAction(new Initialize(accessToken));\n}\nrun().catch(err => console.error(err));","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"\" + \"d61f2cd73db8106be47c\" + \".bundle.js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/wettma/\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkwettma\"] = self[\"webpackChunkwettma\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [401], function() { return __webpack_require__(2028); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}