{"version":3,"sources":["webpack://wettma/./src/state/requests/UpdateScoreboardAction.ts","webpack://wettma/./src/components/ScoreboardComponent/ScoreboardComponent.ts","webpack://wettma/./src/components/ScoreboardComponent/ScoreboardComponent.html"],"names":["UpdateScoreboardAction","type","ScoreboardComponent","HTMLElement","super","this","innerHTML","store","router","tableBody","querySelector","scoreboardLoadError","scoreboardRenderer","ArrayToElementRenderer","g","userId","row","document","createElement","appendChild","abortController","AbortController","postAction","subscribe","s","update","scoreboard","e","d","children","innerText","place","displayName","points","toFixed","style","display","scoreboardRequest","signal","preventDefault","navigate","abort","customElements","define"],"mappings":"gMAIM,MAAOA,EACT,cACS,KAAAC,KAAI,G,wBCIX,MAAOC,UAA4BC,YAQrC,cACIC,QACAC,KAAKC,UCnBF,giBDoBHD,KAAKE,MAAQ,kBACbF,KAAKG,OAAS,kBACdH,KAAKI,UAAYJ,KAAKK,cAAc,SACpCL,KAAKM,oBAAsBN,KAAKK,cAAc,0BAC9CL,KAAKO,mBAAqB,IAAIC,EAAA,EAAuBR,KAAKI,WACtDK,GAAKA,EAAEC,SACPD,IACI,IAAIE,EAAMC,SAASC,cAAc,MAIjC,OAHAF,EAAIG,YAAaF,SAASC,cAAc,OACxCF,EAAIG,YAAaF,SAASC,cAAc,OACxCF,EAAIG,YAAaF,SAASC,cAAc,OACjCF,KAInB,oBACIX,KAAKe,gBAAkB,IAAIC,gBAC3BhB,KAAKE,MAAMe,WAAW,IAAItB,GAC1BK,KAAKE,MAAMgB,WAAUC,IACjBnB,KAAKO,mBAAmBa,OAAOD,EAAEE,YAAY,CAACC,EAAGC,KACcD,EAAEE,SAAS,GAC7DC,UAAY,GAAGF,EAAEG,SACgCJ,EAAEE,SAAS,GAC7DC,UAAYF,EAAEI,YACsCL,EAAEE,SAAS,GAC7DC,UAAY,GAAGF,EAAEK,OAAOC,QAAQ,QAE9C7B,KAAKM,oBAAoBwB,MAAMC,QAAUZ,EAAEa,mBAAqB,WAAsB,OAAS,SAChGhC,KAAKe,gBAAgBkB,SACxB,OAAuBjC,KAAKK,cAAc,KAAM,SAASiB,IACrDA,EAAEY,iBACFlC,KAAKG,OAAOA,OAAOgC,SAAS,GAAI,YACjCnC,KAAKe,gBAAgBkB,QAI5B,uBACIjC,KAAKe,gBAAgBqB,SAI7BC,eAAeC,OAAO,uBAAwBzC","file":"5e7c732d5e3a3a28b400.bundle.js","sourcesContent":["import { Action as Action } from \"./Action\";\nimport { ActionType as ActionType } from \"./ActionType\";\n\n\nexport class UpdateScoreboardAction implements Action {\n    constructor() { }\n    readonly type = ActionType.UpdateScoreboard;\n}\n","import { abortableEventListener } from \"../../abortable-event-listener\";\nimport { AppRouter } from \"../../app-router\";\nimport { ArrayToElementRenderer } from \"../../ArrayToElementRenderer\";\nimport { ScoreboardEntry } from \"../../models/ScoreboardEntry\";\nimport { UpdateScoreboardAction } from \"../../state/requests/UpdateScoreboardAction\";\nimport { RequestState } from \"../../state/state\";\nimport { Store } from \"../../state/store\";\nimport template from \"./ScoreboardComponent.html\";\nimport \"./ScoreboardComponent.scss\";\n\nexport class ScoreboardComponent extends HTMLElement {\n    private store: Store;\n    private abortController: AbortController;\n    private router: AppRouter;\n    private scoreboardRenderer: ArrayToElementRenderer<ScoreboardEntry, HTMLTableRowElement, string>;\n    private tableBody: HTMLTableSectionElement;\n    private scoreboardLoadError: HTMLDivElement;\n\n    constructor() {\n        super();\n        this.innerHTML = template;\n        this.store = Store.getInstance();\n        this.router = AppRouter.getInstance();\n        this.tableBody = this.querySelector(\"tbody\");\n        this.scoreboardLoadError = this.querySelector(\"#scoreboard-load-error\");\n        this.scoreboardRenderer = new ArrayToElementRenderer(this.tableBody,\n            g => g.userId,\n            g => {\n                let row = document.createElement(\"tr\");\n                row.appendChild( document.createElement(\"td\"));\n                row.appendChild( document.createElement(\"td\"));\n                row.appendChild( document.createElement(\"td\"));\n                return row;\n            });\n    }\n\n    connectedCallback() {\n        this.abortController = new AbortController();\n        this.store.postAction(new UpdateScoreboardAction());\n        this.store.subscribe(s => {\n            this.scoreboardRenderer.update(s.scoreboard, (e, d) => {\n                let placeCol: HTMLTableCellElement = <HTMLTableCellElement>e.children[0];\n                placeCol.innerText = `${d.place}.`;\n                let nameCol: HTMLTableCellElement = <HTMLTableCellElement>e.children[1];\n                nameCol.innerText = d.displayName;\n                let pointsCol: HTMLTableCellElement = <HTMLTableCellElement>e.children[2];\n                pointsCol.innerText = `${d.points.toFixed(2)}`;\n            });\n            this.scoreboardLoadError.style.display = s.scoreboardRequest == RequestState.Failed ? \"flex\" : \"none\";\n        }, this.abortController.signal);\n        abortableEventListener(this.querySelector(\"a\"), \"click\", e => {\n            e.preventDefault();\n            this.router.router.navigate(\"\", \"wettma\");\n        }, this.abortController.signal);\n\n    }\n\n    disconnectedCallback() {\n        this.abortController.abort();\n    }\n}\n\ncustomElements.define(\"scoreboard-component\", ScoreboardComponent);\n","// Module\nvar code = \"<div class=\\\"container\\\"> <section class=\\\"section\\\"> <nav class=\\\"link-section\\\"> <a href=\\\"\\\" id=\\\"back-link\\\">zur√ºck zur Startseite</a> </nav> <h2> Rangliste </h2> <div id=\\\"scoreboard-load-error\\\" class=\\\"status-msg error\\\" style=\\\"display:none\\\"> <span class=\\\"material-icons\\\" title=\\\"Tipp konnte nicht gespeichert werden\\\"> error </span> Rangliste konnte nicht geladen werden. </div> <table class=\\\"scoreboard-table\\\"> <thead> <tr> <td title=\\\"Platzierung\\\"></td> <td>Spieler/in</td> <td>Punkte</td> </tr> </thead> <tbody> </tbody> </table> </section> </div>\";\n// Exports\nexport default code;"],"sourceRoot":""}