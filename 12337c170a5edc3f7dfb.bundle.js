!function(){"use strict";var e,t,s,a,n={557:function(e,t,s){s.d(t,{T:function(){return a}});class a{constructor(e,t,s){this.listElement=e,this.keySelector=t,this.createElement=s,this.keyToElement=new Map,this.elementToKey=new WeakMap}update(e,t){let s=new Map,a=e=>s.get(e)||(()=>{let t=this.keySelector(e);return s.set(e,t),t})();for(let s of Array.from(this.listElement.children)){let n=s,i=e.find((e=>this.elementToKey.get(n)==a(e)));i?t(n,i):this.listElement.removeChild(n)}let n=null,i=new Map;for(let s of e){let e=a(s),r=this.keyToElement.get(e);r||(r=this.createElement(s),t(r,s),this.elementToKey.set(r,e)),i.set(e,r),null==n&&r!=this.listElement.firstElementChild?this.listElement.prepend(r):null!=n&&n.nextElementSibling!=r&&n.insertAdjacentElement("afterend",r),n=r}this.keyToElement=i}}},258:function(e,t,s){function a(e,t,s,a){e.addEventListener(t,s),a.addEventListener("abort",(()=>{e.removeEventListener(t,s)}))}s.d(t,{I:function(){return a}})},455:function(e,t,s){s.d(t,{W:function(){return F}});class a{constructor(e,t){this.routeResolver=e,this.routeRenderer=t,this.lastRoute=null,this.popStateListener=this.handlePopState.bind(this)}handlePopState(e){this.resolve(window.location.pathname,{searchParams:new URLSearchParams(window.location.search)}).then((e=>this.render(e)))}run(){let e=document.querySelector("base");this.basePrefix=e.getAttribute("href"),this.baseHref=e.href,window.addEventListener("popstate",this.popStateListener),this.resolve(window.location.pathname,{searchParams:new URLSearchParams(window.location.search)}).then((e=>this.render(e)))}destroy(){window.removeEventListener("popstate",this.popStateListener)}resolve(e,t){let s=this.getRoute(e);return Promise.resolve(this.routeResolver.resolve(this.lastRoute,s,this,t)).then((e=>!!e&&{resolved:e,currentRoute:s}))}render(e){return!!e&&(this.routeRenderer.render(e.resolved),this.lastRoute=e.currentRoute,!0)}getRoute(e){let t=e===this.baseHref,s=e.substr(0,this.basePrefix.length)===this.basePrefix;return t?"":s?e.substring(this.basePrefix.length):e}navigate(e,t,s){let a=new URL(e,this.baseHref);this.resolve(a.pathname,a).then((e=>{e&&(s?window.history.replaceState({},t||document.title,a.href):window.history.pushState({},t||document.title,a.href)),this.render(e)}))}}class n{constructor(e){this.container=e,this.currentComponent=!1}render(e){e&&(this.currentComponent&&(this.container.innerHTML=""),this.container.appendChild(e),this.currentComponent=!0)}}var i=s(258),r=s(557),o=s(234);class l{constructor(e){this.template=e}get(){return null==this.instance&&(this.instance=document.createElement("template"),this.instance.innerHTML=this.template),document.importNode(this.instance.content,!0)}}const d="choice",c="display",h=new l('<button type="button" class="odds-button"/>');class u extends HTMLElement{constructor(){super(),this.appendChild(h.get()),this.btn=this.querySelector("button")}connectedCallback(){this.abortController=new AbortController,(0,i.I)(this.btn,"click",(e=>{e.preventDefault(),this.dispatchEvent(new CustomEvent("oddsclicked",{bubbles:!0,detail:parseInt(this.getAttribute(d))}))}),this.abortController.signal)}disconnectedCallback(){this.abortController.abort()}attributeChangedCallback(){this.updateAttributes()}updateAttributes(){this.btn.innerText=this.getAttribute(c)}static get observedAttributes(){return[d,c]}}customElements.define("odds-button",u);class m{constructor(e,t){this.oddsId=e,this.choice=t,this.type=0}}var p;!function(e){e[e.Team1=0]="Team1",e[e.Team2=1]="Team2",e[e.Draw=2]="Draw"}(p||(p={}));const g={"Türkei":"tr",Italien:"it",Wales:"gb-wls",Schweiz:"ch",Schweden:"se",Finnland:"fi",Deutschland:"de",England:"gb-eng","Dänemark":"dk",Russland:"ru","Österreich":"at",Belgien:"be",Kroatien:"hr",Nordmazedonien:"mk",Niederlande:"nl",Ukraine:"ua",Spanien:"es",Schottland:"gb-sct",Tschechien:"cz",Polen:"pl",Slowakei:"sk",Portugal:"pt",Ungarn:"hu",Frankreich:"fr",Katar:"qa",Ecuador:"ec",Iran:"ir",Senegal:"sn",USA:"us",Argentinien:"ar","Saudi Arabien":"sa",Tunesien:"tn",Mexiko:"mx",Australien:"au",Marokko:"ma",Japan:"jp","Costa Rica":"cr",Kanada:"ca",Uruguay:"uy",Ghana:"gh",Brasilien:"br","Republik Korea":"kr",Kamerun:"cm",Serbien:"rs"};class f{constructor(e){this.gameId=e,this.type=7}}var b=s(36);const y=new l('<a href="" data-ref="expand-link" class="expand-link"> <span class="material-icons" data-ref="expand-arrow"> expand_more </span> <span class="expand-link__text" data-ref="expand-text"> Tipps von allen anzeigen </span> </a> <div data-ref="loading" class="status-msg saving"> <span class="material-icons" title="Tipps werden geladen."> donut_large </span> Tipps werden geladen. </div> <table class="bets-table" style="display:none"> <thead> <tr> <td> Spieler/in </td> <td data-ref="team1label"></td> <td>-</td> <td data-ref="team2label"></td> </tr> </thead> <tbody></tbody> </table>');class w extends HTMLElement{constructor(){super(),this.appendChild(y.get()),this.expandLink=this.querySelector('[data-ref="expand-link"]'),this.table=this.querySelector("table"),this.loading=this.querySelector('[data-ref="loading"]'),this.store=o.y.getInstance(),this.tableBody=this.querySelector("tbody"),this.expandText=this.querySelector('[data-ref="expand-text"]'),this.expandArrow=this.querySelector('[data-ref="expand-arrow"]'),this.team1Label=this.querySelector('[data-ref="team1label"]'),this.team2Label=this.querySelector('[data-ref="team2label"]'),this.betsRenderer=new r.T(this.tableBody,(e=>e.userId),(e=>{let t=document.createElement("tr"),s=document.createElement("td");return t.appendChild(s),t.appendChild(document.createElement("td")),t.appendChild(document.createElement("td")),t.appendChild(document.createElement("td")),t}))}connectedCallback(){this.abortController=new AbortController,(0,i.I)(this.expandLink,"click",(e=>{e.preventDefault(),this.showBets=!this.showBets,this.table.style.display=this.showBets?"":"none",this.expandArrow.classList.toggle("rotate",this.showBets),this.showBets&&this.store.postAction(new f(this.game.id)),this.expandText.innerText=this.showBets?"Tipps von allen verbergen":"Tipps von allen anzeigen"}),this.abortController.signal),this.store.subscribe((e=>{this.updateBets(e)}),this.abortController.signal)}disconnectedCallback(){this.abortController.abort()}updateBets(e){let t=e.gameBets[this.game.id];this.loading.style.display=t&&t.requestState==b.y.InProgress?"flex":"none",t&&t.bets&&this.betsRenderer.update(t.bets,((e,t)=>{let s=!1;"result"in this.game&&(s=t.choice==p.Team1&&this.game.result.team1Goals>this.game.result.team2Goals||t.choice==p.Team2&&this.game.result.team1Goals<this.game.result.team2Goals||t.choice==p.Draw&&this.game.result.team1Goals==this.game.result.team2Goals);let a=s?'<span class="material-icons">done</span>':'<span class="material-icons">close</span>';e.children[0].innerText=t.displayName,e.children[1].innerHTML=t.choice==p.Team1?a:"",e.children[2].innerHTML=t.choice==p.Draw?a:"",e.children[3].innerHTML=t.choice==p.Team2?a:""}))}setGame(e){this.game=e,this.team1Label.innerText=g[e.team1].toUpperCase(),this.team2Label.innerText=g[e.team2].toUpperCase(),this.updateBets(this.store.state)}}customElements.define("bets-display",w);const v="points",S=new l("<div><span></span></div>");class T extends HTMLElement{constructor(){super(),this.appendChild(S.get())}connectedCallback(){}disconnectedCallback(){}attributeChangedCallback(){this.updateAttributes()}updateAttributes(){this.querySelector("span").innerText=this.getAttribute(v),this.title=`Dieses Spiel ist ${this.getAttribute(v)} Punkte wert.`}static get observedAttributes(){return[v]}}customElements.define("points-display",T);let k=new Intl.DateTimeFormat(["de-AT"],{weekday:"short",day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"});s.e(876).then(s.bind(s,876));const C=new l('<points-display></points-display> <form data-ref="odds-form" class="odds-form"> <h3 class="team1"> <span class="flag-icon flag-icon-tr" data-ref="team1-flag"></span> <span data-ref="team1"></span> </h3> <h3 class="team2"> <span class="flag-icon flag-icon-it" data-ref="team2-flag"></span> <span data-ref="team2"></span> </h3> <span data-ref="time" class="time"></span> <odds-button class="choice-team1" choice="0" data-ref="team1-odds"></odds-button> <odds-button class="choice-draw" choice="2" data-ref="draw-odds"></odds-button> <odds-button class="choice-team2" choice="1" data-ref="team2-odds"></odds-button> </form> <div data-ref="my-bet" class="status-msg my-bet"> <span class="material-icons" title="Tipp abgegeben"> done </span> <span> Dein Tipp <strong> <span data-ref="my-bet-team"></span> </strong> für <strong> <span data-ref="my-bet-odds"></span></strong>. </span> </div> <div data-ref="saving" class="status-msg saving"> <span class="material-icons" title="Tipp wird gepeichert."> donut_large </span> Dein Tipp wird gespeichert. </div> <div data-ref="odds-changed-error" class="status-msg warning"> <span class="material-icons" title="Tipp nicht gespeichert: Quoten geändert"> warning </span> Dein Tipp wurde nicht gespeichert, weil sich die Quoten geändert haben. </div> <div data-ref="game-started-error" class="status-msg error"> <span class="material-icons" title="Spiel hat bereits begonnen"> error </span> Dein Tipp wurde nicht gespeichert, weil das Spiel bereits begonnen hat. </div> <div data-ref="save-error" class="status-msg error"> <span class="material-icons" title="Tipp konnte nicht gespeichert werden"> error </span> Beim Speichern ist ein Fehler aufgetreten. </div>');class x extends HTMLElement{constructor(){super(),this.appendChild(C.get()),this.team1Label=this.querySelector('[data-ref="team1"]'),this.team2Label=this.querySelector('[data-ref="team2"]'),this.team1Odds=this.querySelector('[data-ref="team1-odds"]'),this.drawOdds=this.querySelector('[data-ref="draw-odds"]'),this.team2Odds=this.querySelector('[data-ref="team2-odds"]'),this.oddsForm=this.querySelector('[data-ref="odds-form"]'),this.timeDisplay=this.querySelector('[data-ref="time"]'),this.myBetContainer=this.querySelector('[data-ref="my-bet"]'),this.myBetTeam=this.querySelector('[data-ref="my-bet-team"]'),this.myBetOdds=this.querySelector('[data-ref="my-bet-odds"]'),this.saving=this.querySelector('[data-ref="saving"]'),this.oddsChangedError=this.querySelector('[data-ref="odds-changed-error"]'),this.gameStartedError=this.querySelector('[data-ref="game-started-error"]'),this.unknownError=this.querySelector('[data-ref="save-error"]'),this.team1Flag=this.querySelector('[data-ref="team1-flag"]'),this.team2Flag=this.querySelector('[data-ref="team2-flag"]'),this.pointsDisplay=this.querySelector("points-display"),this.store=o.y.getInstance()}connectedCallback(){this.abortController=new AbortController,(0,i.I)(this.oddsForm,"oddsclicked",(e=>{this.store.postAction(new m(this.game.odds.id,e.detail))}),this.abortController.signal)}disconnectedCallback(){this.abortController.abort()}setGame(e){var t,s,a;this.game=e,this.team1Label.innerText=e.team1,this.team2Label.innerText=e.team2,this.timeDisplay.innerText=k.format(e.time),this.team1Flag.className=`flag-icon flag-icon-${g[e.team1]}`,this.team2Flag.className=`flag-icon flag-icon-${g[e.team2]}`,this.team1Odds.style.visibility=e.odds?"visible":"hidden",this.drawOdds.style.visibility=e.odds?"visible":"hidden",this.team2Odds.style.visibility=e.odds?"visible":"hidden",e.odds&&(e.odds.team1?(this.team1Odds.style.display="",this.team1Odds.setAttribute(c,`${e.odds.team1.toFixed(2)}`)):this.team1Odds.style.display="none",e.odds.team2?(this.team2Odds.style.display="",this.team2Odds.setAttribute(c,`${e.odds.team2.toFixed(2)}`)):this.team2Odds.style.display="none",e.odds.draw?(this.drawOdds.style.display="",this.drawOdds.setAttribute(c,`${e.odds.draw.toFixed(2)}`)):this.drawOdds.style.display="none"),this.myBetContainer.style.display=e.myBet&&!e.saving?"flex":"none",e.myBet&&(this.myBetTeam.innerText=e.myBet.choice==p.Team1?e.team1:e.myBet.choice==p.Team2?e.team2:"Unentschieden",this.myBetOdds.innerText=`${e.myBet.choice==p.Team1?e.myBet.odds.team1:e.myBet.choice==p.Team2?e.myBet.odds.team2:e.myBet.odds.draw}`),this.saving.style.display=e.saving?"flex":"none",this.oddsChangedError.style.display=(null===(t=e.saveError)||void 0===t?void 0:t.oddsChanged)?"flex":"none",this.gameStartedError.style.display=(null===(s=e.saveError)||void 0===s?void 0:s.gameStarted)?"flex":"none",this.unknownError.style.display=(null===(a=e.saveError)||void 0===a?void 0:a.unknown)?"flex":"none",+e.time<+new Date?this.betsDisplay||(this.betsDisplay=new w,this.appendChild(this.betsDisplay)):this.betsDisplay&&(this.removeChild(this.betsDisplay),this.betsDisplay=null),this.betsDisplay&&this.betsDisplay.setGame(e),this.pointsDisplay.setAttribute(v,`${e.points||0}`)}}customElements.define("upcoming-game-display",x);let E=new Intl.DateTimeFormat(["de-AT"],{weekday:"short",day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"});const L=new l('<points-display></points-display> <div class="finished-game"> <h3 class="team1"> <span class="flag-icon flag-icon-tr" data-ref="team1-flag"></span> <span data-ref="team1"></span> </h3> <h3 class="team2"> <span class="flag-icon flag-icon-it" data-ref="team2-flag"></span> <span data-ref="team2"></span> </h3> <span data-ref="time" class="time"></span> <h3 class="goals1" data-ref="goals1"></h3> <h3 class="goals2" data-ref="goals2"></h3> </div> <div data-ref="correct-bet" class="status-msg correct-bet"> <span class="material-icons" title="Tipp abgegeben"> done </span> <span> Dein Tipp <strong> <span data-ref="my-bet-team"></span> </strong> für <strong> <span data-ref="my-bet-odds"></span></strong> war richtig. </span> </div> <div data-ref="wrong-bet" class="status-msg wrong-bet"> <span class="material-icons" title="Tipp abgegeben"> close </span> <span> Dein Tipp <strong> <span data-ref="my-bet-team"></span> </strong> für <strong> <span data-ref="my-bet-odds"></span></strong> war leider nicht richtig. </span> </div> <bets-display data-ref="bets-display"></bets-display>');class q extends HTMLElement{constructor(){super(),this.appendChild(L.get()),this.team1Label=this.querySelector('[data-ref="team1"]'),this.team2Label=this.querySelector('[data-ref="team2"]'),this.timeDisplay=this.querySelector('[data-ref="time"]'),this.correctBet=this.querySelector('[data-ref="correct-bet"]'),this.wrongBet=this.querySelector('[data-ref="wrong-bet"]'),this.team1Flag=this.querySelector('[data-ref="team1-flag"]'),this.team2Flag=this.querySelector('[data-ref="team2-flag"]'),this.goals1=this.querySelector('[data-ref="goals1"]'),this.goals2=this.querySelector('[data-ref="goals2"]'),this.betsDisplay=this.querySelector('[data-ref="bets-display"]'),this.pointsDisplay=this.querySelector("points-display"),this.store=o.y.getInstance()}connectedCallback(){this.abortController=new AbortController}disconnectedCallback(){this.abortController.abort()}setGame(e){this.game=e,this.team1Label.innerText=e.team1,this.team2Label.innerText=e.team2,this.timeDisplay.innerText=E.format(e.time),this.team1Flag.className=`flag-icon flag-icon-${g[e.team1]}`,this.team2Flag.className=`flag-icon flag-icon-${g[e.team2]}`,this.goals1.innerText=e.result.team1Goals+"",this.goals2.innerText=e.result.team2Goals+"";let t=this.game.myBet&&(this.game.myBet.choice==p.Team1&&this.game.result.team1Goals>this.game.result.team2Goals||this.game.myBet.choice==p.Team2&&this.game.result.team1Goals<this.game.result.team2Goals||this.game.myBet.choice==p.Draw&&this.game.result.team1Goals==this.game.result.team2Goals),s=this.game.myBet&&!t;if(this.correctBet.style.display=t?"flex":"none",this.wrongBet.style.display=s?"flex":"none",this.game.myBet){for(let t of this.querySelectorAll('[data-ref="my-bet-team"]'))t.innerText=e.myBet.choice==p.Team1?e.team1:e.myBet.choice==p.Team2?e.team2:"Unentschieden";for(let t of this.querySelectorAll('[data-ref="my-bet-odds"]'))t.innerText=`${e.myBet.choice==p.Team1?e.myBet.odds.team1:e.myBet.choice==p.Team2?e.myBet.odds.team2:e.myBet.odds.draw}`}this.betsDisplay.setGame(e),this.pointsDisplay.setAttribute(v,`${e.points||0}`)}}customElements.define("finished-game-display",q);class A{constructor(){this.type=8}}class B extends HTMLElement{constructor(){super(),this.innerHTML='<div class="container"> <section class="section"> <nav class="link-section"> <a href="#finished-gamesh">Vergangene Spiele</a> <a href="scoreboard" title="Rangliste - wettma" id="scoreboard-link" data-ref="spa-link">Rangliste</a> <a href="explanation" title="Spielanleitung - wettma" id="explanation-link" data-ref="spa-link">Spielanleitung</a> </nav> <h2> Nächste Spiele </h2> <ol id="upcoming-games" class="gameslist"> </ol> <h2 id="finished-gamesh"> Vergangene Spiele </h2> <ol id="finished-games" class="gameslist"> </ol> <button id="show-more">Mehr anzeigen</button> </section> </div>',this.store=o.y.getInstance(),this.router=F.getInstance(),this.upcomingGamesList=this.querySelector("#upcoming-games"),this.finishedGamesList=this.querySelector("#finished-games"),this.showMore=this.querySelector("#show-more"),this.upcomingGamesRenderer=new r.T(this.upcomingGamesList,(e=>e.id),(e=>{let t=document.createElement("li");return t.appendChild(new x),t})),this.finishedGamesRenderer=new r.T(this.finishedGamesList,(e=>e.id),(e=>{let t=document.createElement("li");return t.appendChild(new q),t}))}connectedCallback(){this.abortController=new AbortController,this.store.subscribe((e=>this.updateState(e)),this.abortController.signal),this.updateState(this.store.state);for(let e of this.querySelectorAll('[data-ref="spa-link"]'))(0,i.I)(e,"click",(t=>{t.preventDefault(),this.router.router.navigate(e.getAttribute("href"),e.getAttribute("title"))}),this.abortController.signal);(0,i.I)(this.showMore,"click",(()=>{this.store.postAction(new A)}),this.abortController.signal)}updateState(e){null!=e&&(this.upcomingGamesRenderer.update(e.upcomingGames,((e,t)=>{e.children[0].setGame(t)})),this.finishedGamesRenderer.update(e.finishedGames,((e,t)=>{e.children[0].setGame(t)})),this.showMore.style.display=e.hasMoreFinishedGames?"":"none")}disconnectedCallback(){this.abortController.abort()}}customElements.define("home-component",B);class D extends HTMLElement{constructor(){super(),this.innerHTML='<form method="GET" action="https://accounts.google.com/o/oauth2/v2/auth" id="login_form"> <input type="hidden" name="client_id" id="client_id" value="439677686972-2c42enpqguk403j6nsb225e509n60ul9.apps.googleusercontent.com"> <input type="hidden" name="redirect_uri" id="redirect_uri"> <input type="hidden" name="response_type" value="token id_token"> <input type="hidden" name="login_hint" id="login_hint"> <input type="hidden" name="nonce" id="nonce"> <input type="hidden" name="scope" value="openid"> <button type="submit">Login über Google</button> </form>'}connectedCallback(){this.nonceInput=this.querySelector("#nonce"),this.redirectUriInput=this.querySelector("#redirect_uri"),this.redirectUriInput.value=window.location.href.replace(/\/(login|explanation|scoreboard|setresult)|(\?.+)|(\#.+)/g,"").replace(/(\/$)/g,""),this.loginHintInput=this.querySelector("#login_hint"),this.loginForm=this.querySelector("#login_form"),this.nonceInput.value=function(e){for(var t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<8;a++)t+=s.charAt(Math.floor(Math.random()*s.length));return t}()}disconnectedCallback(){}setLoginHint(e){this.loginHintInput.value=e}submit(){this.loginForm.submit()}}customElements.define("login-form",D);class I extends HTMLElement{constructor(){super(),this.innerHTML='<div class="container"> <section class="section"> <h2> Login </h2> <p>Du musst dich zuerst anmelden bevor du fortfahren kannst.</p> <login-form></login-form> </section> </div>',this.loginForm=this.querySelector("login-form")}connectedCallback(){"FederatedCredential"in window&&navigator.credentials.get({federated:{providers:["https://google.wettma.kesal.at"]},mediation:"optional"}).then((e=>{e&&"federated"==e.type&&(this.loginForm.setLoginHint(e.id),this.loginForm.submit())}))}disconnectedCallback(){}}customElements.define("login-component",I);class R{constructor(e){this.displayName=e,this.type=3}}class M extends HTMLElement{constructor(){super(),this.innerHTML='<div class="container"> <section class="section"> <h2> Anzeigenamen </h2> <p>Lege einen Anzeigenamen fest. Dieser wird <strong>für alle ersichtlich</strong> in der Rangliste angezeigt.</p> <form> <label for="display-name">Anzeigename</label> <input type="text" id="display-name" name="display-name" maxlength="15" required="required"> <button type="submit">Speichern</button> </form> <span style="display:none" id="register-failed">Registrierung fehlgeschlagen</span> </section> </div>',this.form=this.querySelector("form"),this.registerFailed=this.querySelector("#register-failed"),this.store=o.y.getInstance(),this.router=F.getInstance()}connectedCallback(){this.abortController=new AbortController,(0,i.I)(this.form,"submit",(e=>this.onFormSubmit(e)),this.abortController.signal),this.store.subscribe((e=>this.updateState(e)),this.abortController.signal),this.updateState(this.store.state)}updateState(e){null!=e&&(e.register==b.y.Successful&&this.router.router.navigate("","wettma",!0),this.registerFailed.style.display=e.register==b.y.Failed?"inline":"none")}onFormSubmit(e){e.preventDefault();let t=new FormData(this.form).get("display-name");this.store.postAction(new R(t))}disconnectedCallback(){this.abortController.abort()}}customElements.define("register-component",M);class F{static getInstance(){return null==this.instance&&(this.instance=new F),this.instance}constructor(){let e=this;this.router=new a(new class{async resolve(t,a,n){switch(a){case"login":return e.activeRoute="login",new I;case"register":return e.activeRoute="register",new M;case"explanation":e.activeRoute="explanation";let{ExplanationComponent:t}=await s.e(554).then(s.bind(s,554));return new t;case"scoreboard":e.activeRoute="scoreboard";let{ScoreboardComponent:a}=await s.e(698).then(s.bind(s,698));return new a;case"setresult":e.activeRoute="setresult";let{SetResultComponent:n}=await s.e(151).then(s.bind(s,151));return new n;default:return e.activeRoute="home",new B}}},new n(document.getElementById("content")))}}F.instance=null},36:function(e,t,s){var a;s.d(t,{y:function(){return a}}),function(e){e[e.Unset=0]="Unset",e[e.InProgress=1]="InProgress",e[e.Successful=2]="Successful",e[e.Failed=3]="Failed"}(a||(a={}))},234:function(e,t,s){s.d(t,{y:function(){return a}});class a{get state(){return this._state}static getInstance(){return null==this.instance&&(this.instance=new a),this.instance}constructor(){this._state=null,this.subscriptions=[],this.worker=new Worker(new URL(s.p+s.u(772),s.b)),this.worker.addEventListener("message",(e=>{this._state=e.data;for(let e of this.subscriptions)try{e.call(this._state)}catch(e){console.error("Error while updating",e)}}))}subscribe(e,t){let s={call:e};this.subscriptions.push(s),t&&t.addEventListener("abort",(()=>{this.subscriptions.splice(this.subscriptions.indexOf(s),1)}))}postAction(e){this.worker.postMessage(e)}}a.instance=null}},i={};function r(e){var t=i[e];if(void 0!==t)return t.exports;var s=i[e]={exports:{}};return n[e](s,s.exports,r),s.exports}r.m=n,r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,s){return r.f[s](e,t),t}),[]))},r.u=function(e){return{151:"6ab41579915de3e4b806",554:"9e784e4a7531ed612838",698:"226bc11fbeff4566cd8e",772:"203cd83bad982b3f2d2a",876:"9611c2cc85866ed92021"}[e]+".bundle.js"},r.miniCssF=function(e){return e+"."+{151:"8c5b220bf6f482881a90",554:"8c5b220bf6f482881a90",698:"914aee05d18f9b23de70",876:"c5502427a37266afd21b"}[e]+".css"},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="wettma:",r.l=function(s,a,n,i){if(e[s])e[s].push(a);else{var o,l;if(void 0!==n)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var h=d[c];if(h.getAttribute("src")==s||h.getAttribute("data-webpack")==t+n){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+n),o.src=s),e[s]=[a];var u=function(t,a){o.onerror=o.onload=null,clearTimeout(m);var n=e[s];if(delete e[s],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((function(e){return e(a)})),t)return t(a)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),l&&document.head.appendChild(o)}},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",s=function(e){return new Promise((function(t,s){var a=r.miniCssF(e),n=r.p+a;if(function(e,t){for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var n=(r=s[a]).getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(n===e||n===t))return r}var i=document.getElementsByTagName("style");for(a=0;a<i.length;a++){var r;if((n=(r=i[a]).getAttribute("data-href"))===e||n===t)return r}}(a,n))return t();!function(e,t,s,a){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.onerror=n.onload=function(i){if(n.onerror=n.onload=null,"load"===i.type)s();else{var r=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=o,n.parentNode.removeChild(n),a(l)}},n.href=t,document.head.appendChild(n)}(e,n,t,s)}))},a={826:0},r.f.miniCss=function(e,t){a[e]?t.push(a[e]):0!==a[e]&&{151:1,554:1,698:1,876:1}[e]&&t.push(a[e]=s(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))},function(){r.b=document.baseURI||self.location.href;var e={826:0};r.f.j=function(t,s){var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)s.push(a[2]);else{var n=new Promise((function(s,n){a=e[t]=[s,n]}));s.push(a[2]=n);var i=r.p+r.u(t),o=new Error;r.l(i,(function(s){if(r.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var n=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",o.name="ChunkLoadError",o.type=n,o.request=i,a[1](o)}}),"chunk-"+t,t)}};var t=function(t,s){var a,n,i=s[0],o=s[1],l=s[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(a in o)r.o(o,a)&&(r.m[a]=o[a]);l&&l(r)}for(t&&t(s);d<i.length;d++)n=i[d],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0},s=self.webpackChunkwettma=self.webpackChunkwettma||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}(),function(){var e=r(455);class t{constructor(e,t){this.accessToken=e,this.isStandalone=t,this.type=2}}class s{constructor(){this.type=1}}var a=r(234),n=r(258);class i{constructor(){this.type=4}}class o extends HTMLElement{constructor(){super(),this.innerHTML='<div class="app-bar__container"> <nav class="app-bar"> <a href=""> <h1> <span class="material-icons"> sports_soccer </span> wettma</h1> </a> <div class="user-container" id="user-container"> <span id="logged-in-user"></span> <button id="logout" style="display:none">Logout</button> <button id="login" style="display:none">Login</button> </div> </nav> </div>',this.store=a.y.getInstance(),this.router=e.W.getInstance(),this.displayName=this.querySelector("#logged-in-user"),this.logoutBtn=this.querySelector("#logout"),this.loginBtn=this.querySelector("#login"),this.userContainer=this.querySelector("#user-container")}connectedCallback(){this.abortController=new AbortController,(0,n.I)(this.logoutBtn,"click",(e=>{this.store.postAction(new i),sessionStorage.clear()}),this.abortController.signal),(0,n.I)(this.loginBtn,"click",(e=>{this.router.router.navigate("login","wettma - Login")}),this.abortController.signal),this.store.subscribe((e=>this.updateState(e)),this.abortController.signal),this.updateState(this.store.state),(0,n.I)(this.querySelector("a"),"click",(e=>{e.preventDefault(),this.router.router.navigate("","wettma")}),this.abortController.signal)}updateState(e){null!=e&&(this.displayName.innerText=e.displayName||"",this.displayName.style.display=e.accessToken?"inline":"none",this.logoutBtn.style.display=e.accessToken?"inline":"none",this.loginBtn.style.display=e.accessToken?"none":"inline")}disconnectedCallback(){this.abortController.abort()}}customElements.define("app-bar",o),"serviceWorker"in navigator&&window.addEventListener("load",(async()=>{navigator.serviceWorker.register("./sw.js").then((e=>{})).catch((e=>{console.log("SW registration failed: ",e)}))})),async function(){let n=e.W.getInstance();n.router.run();let i=a.y.getInstance();i.subscribe((e=>{e.goToLogin&&"login"!=n.activeRoute?(i.postAction(new s),n.router.navigate("login","wettma - Login")):e.goToRegister&&"register"!=n.activeRoute&&(i.postAction(new s),n.router.navigate("register","wettma - Registrieren"))}));let r=await async function(){const e="wettma-webapp-token";let t=new URLSearchParams(window.location.hash.replace(/^#/,"")),s=t.get("id_token");if(s){history.replaceState(null,null," ");let n=await fetch(`https://oauth2.googleapis.com/tokeninfo?id_token=${s}`),i=await n.json();if(!n.ok)throw new Error(`access token validation resulted in ${n.status}`);let r={token:s,exp:+new Date+1e3*parseInt(t.get("expires_in")),scope:i.scope,sub:i.sub};if(sessionStorage.setItem(e,JSON.stringify(r)),"FederatedCredential"in window){var a=await navigator.credentials.create({federated:{id:i.sub,provider:"https://google.wettma.kesal.at/"}});await navigator.credentials.store(a)}return r}{let t=sessionStorage.getItem(e);if(null!=t){let e=JSON.parse(t);if(e.exp>+new Date)return e}}return null}();i.postAction(new t(r,!(!navigator||!navigator.standalone)||!("function"!=typeof window.matchMedia||!window.matchMedia("(display-mode: standalone)").matches)))}().catch((e=>console.error(e)))}()}();
//# sourceMappingURL=12337c170a5edc3f7dfb.bundle.js.map